(function(){"use strict";var t={5614:function(t,e,n){var i=n(144),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("HeaderFlex",{attrs:{title:t.titles}}),e("div"),e("SideTools",{ref:"sideTools",on:{contentNeedRearrange:function(e){t.RequireRearrange,t.stationFTARearrangement,t.guideSignFTAUpdateData},switchViewer:t.updateViewer}}),"kitajuku-dentetsu"===t.signStyle&&""===t.viewerType?e("Signs",{ref:"signs"}):t._e(),"test-sign"===t.signStyle&&""===t.viewerType?e("EntranceGuideSign",{ref:"entrancesSign"}):t._e(),"FTA-station"===t.signStyle&&""===t.viewerType?e("StationSignFTA",{ref:"stationSignFTA"}):t._e(),"FTA-guide"===t.signStyle&&""===t.viewerType?e("GuideSignFTA",{ref:"guideSignFTA"}):t._e(),"kitajuku-dentetsu"===t.signStyle&&""===t.viewerType?e("Editor",{on:{someChanged:t.UpdateData,signChanged:t.UpdateSignStyle,contentNeedRearrange:t.RequireRearrange}}):t._e(),"test-sign"===t.signStyle&&""===t.viewerType?e("EntranceGuideEditor",{on:{someChanged:t.entranceUpdateData,signChanged:t.UpdateSignStyle,contentNeedRearrange:t.entranceRearrangement}}):t._e(),"FTA-station"===t.signStyle&&""===t.viewerType?e("StationSignFTAEditor",{on:{someChanged:t.stationFTAUpdateData,signChanged:t.UpdateSignStyle,contentNeedRearrange:t.stationFTARearrangement,beltDeleted:t.delBeltFTA}}):t._e(),"FTA-guide"===t.signStyle&&""===t.viewerType?e("GuideSignFTAEditor",{on:{signChanged:t.UpdateSignStyle,contentChanged:t.guideSignFTAUpdateData}}):t._e(),"download"===t.viewerType?e("DownloadViewer",{ref:"download",on:{switchViewer:t.updateViewer}}):t._e(),"upload"===t.viewerType?e("UploadViewer",{ref:"upload",on:{switchViewer:t.updateViewer,switchStyle:t.UpdateSignStyle}}):t._e(),e("FooterFlex",{attrs:{title:t.titles}})],1)},s=[],a=function(){var t=this,e=t._self._c;return e("header",[e("link",{attrs:{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"}}),e("div",{staticClass:"header-flex"},[e("h1",[e("small",[e("a",{staticClass:"header-nav-home",attrs:{href:"/"}},[t._v(t._s(t.title))])])]),e("span",[t.darkMode?e("input",{staticClass:"material-symbols-outlined header-nav",attrs:{type:"button",value:"dark_mode"},on:{click:t.changeModeAnimation}}):t._e(),t.darkMode?t._e():e("input",{staticClass:"material-symbols-outlined header-nav",attrs:{type:"button",value:"light_mode"},on:{click:t.changeModeAnimation}}),e("a",{staticClass:"header-nav",attrs:{href:"/about.html"}},[t._v("About")]),e("a",{staticClass:"header-nav",attrs:{href:"/help.html"}},[t._v("Help")]),e("a",{staticClass:"header-nav",attrs:{href:"https://github.com/Team-Cenlinc/FesGen/tree/main"}},[t._v("GitHub")]),e("a",{staticClass:"header-nav",attrs:{href:"https://www.fetarute.org/wiki/index.php/FesGen"}},[t._v("Wiki")]),e("a",{staticClass:"header-nav",attrs:{href:"/",target:"_blank"}},[t._v("Home Page")])])])])},r=[],l=n(6030),u={name:"flex-header",props:["title"],data(){return{darkMode:!1}},mounted(){const t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)");t&&t.matches&&(document.body.classList.add("dark"),this.darkMode=!0),t&&t.addEventListener("change",(t=>{t.matches?(document.body.classList.add("dark"),this.darkMode=!0):(document.body.classList.remove("dark"),this.darkMode=!1)}))},methods:{changeModeAnimation(){(0,l.Z)({targets:"input.header-nav",translateY:-100,direction:"alternate",duration:100}),this.darkMode=!this.darkMode,this.changeColorTheme()},changeColorTheme(){this.darkMode?document.body.classList.add("dark"):document.body.classList.remove("dark")}}},g=u,c=n(1001),d=(0,c.Z)(g,a,r,!1,null,null,null),m=d.exports,h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"side-tools",class:{solid:this.isSolid}},[e("div",{staticClass:"to-header",class:{visible:this.isVisible}},[e("button",{staticClass:"material-symbols-outlined side-tools-topic",attrs:{title:"返回标题"},on:{click:t.scrollToTop}},[t._v("keyboard_double_arrow_up")])]),e("div",{staticClass:"files",class:{position:!this.isVisible}},[e("button",{staticClass:"material-symbols-outlined side-tools-topic",attrs:{title:"文件管理"},on:{click:t.hiddenTrigger}},[t._v("folder_open")]),e("ul",{class:{visible:this.status_clicked}},[e("li",[e("button",{staticClass:"material-symbols-outlined side-tools-content",attrs:{title:"下载文件"},on:{click:t.switchViewerDownload}},[t._v("download")])]),e("li",[e("button",{staticClass:"material-symbols-outlined side-tools-content",attrs:{title:"上传文件"},on:{click:t.switchViewerUpload}},[t._v("upload")])])])])])},f=[],p=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"canvas"}},[e("canvas",{attrs:{id:"sign-canvas"}}),e("div",{attrs:{id:"sign-component"}},[e("keep-alive",[e(this.signStyle,{ref:"svg",tag:"component",staticClass:"sign",attrs:{id:"svg-sign"}})],1)],1),e("div",{staticClass:"data"},[e("p",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v(t._s(this.signInfo||"NO"))])])])},v=[],C=n.p+"img/kitajuku-dentetsu.e85ca833.svg";window.componentsConfig={"kitajuku-dentetsu":"../../assets/signs/kitajuku-dentetsu.svg"};var y={name:"signView",components:{KitajukuDentetsu:C},data(){return{signStyle:"kitajuku-dentetsu",lightStyle:"fluore",output:{outputWidth:600,outputHeight:200},signInfo:{main:{staNameEnglish:"Kaihin-Shukukai",staNameChinese:"海浜宿海",staNameKana:"かいひんしゅくかい",mainTextColor:"#383838"},left:{leftStaNumber:"04",leftStaNameEnglish:"Nishikioka",leftStaNameChinese:"錦岡",leftTextColor:"#383838"},middle:{lineName:"東海岸本線",lineAbbr:"T",middleStaNumber:"03"},right:{rightStaNumber:"02",rightStaNameEnglish:"Kitajuku",rightStaNameChinese:"北宿",rightTextColor:"#7A7A7A"},secondLine:{enable:!1,color:"#A0D4E7"},lineColor:"#7297DD",backgroundColor:"#ECECEC",frameThickness:4,displayForwardArrow:!0,chnCharacterBold:!1,direction:"left"}}},updated(){this.UpdateSignData()},mounted(){this.UpdateSignData()},methods:{UpdateData(t,e,n){this.lightStyle=e,this.signInfo=t,this.output=n},UpdateSignStyle(t){this.signStyle=t},UpdateSignData(){let t=this.$refs.svg.getElementById("Main");t.attributes.fill.value=this.signInfo.main.mainTextColor,t=this.$refs.svg.getElementById("staNameChinese"),t.childNodes[0].innerHTML=this.signInfo.main.staNameChinese,t=this.$refs.svg.getElementById("staNameKana"),t.childNodes[0].innerHTML=this.signInfo.main.staNameKana,t=this.$refs.svg.getElementById("staNameEnglish"),t.childNodes[0].innerHTML=this.signInfo.main.staNameEnglish,t=this.$refs.svg.getElementById("middleIconOuter"),t.attributes.stroke.value=this.signInfo.main.mainTextColor,t=this.$refs.svg.getElementById("middleIconInner"),t.attributes.stroke.value=this.signInfo.main.mainTextColor,t.attributes.fill.value=this.signInfo.main.mainTextColor,t=this.$refs.svg.getElementById("rightStaNameChinese"),t.childNodes[0].innerHTML=this.signInfo.right.rightStaNameChinese,t.attributes.fill.value=this.signInfo.right.rightTextColor,t=this.$refs.svg.getElementById("rightStaNameEnglish"),t.childNodes[0].innerHTML=this.signInfo.right.rightStaNameEnglish,t.attributes.fill.value=this.signInfo.right.rightTextColor,t=this.$refs.svg.getElementById("rightStaNumber"),t.childNodes[0].innerHTML=this.signInfo.right.rightStaNumber,t.attributes.fill.value=this.signInfo.right.rightTextColor,t=this.$refs.svg.getElementById("rightIconOuter"),t.attributes.stroke.value=this.signInfo.right.rightTextColor,t=this.$refs.svg.getElementById("rightIconInner"),t.attributes.stroke.value=this.signInfo.right.rightTextColor,t.attributes.fill.value=this.signInfo.right.rightTextColor,t=this.$refs.svg.getElementById("leftStaNameChinese"),t.childNodes[0].innerHTML=this.signInfo.left.leftStaNameChinese,t.attributes.fill.value=this.signInfo.left.leftTextColor,t=this.$refs.svg.getElementById("leftStaNameEnglish"),t.childNodes[0].innerHTML=this.signInfo.left.leftStaNameEnglish,t.attributes.fill.value=this.signInfo.left.leftTextColor,t=this.$refs.svg.getElementById("leftStaNumber"),t.childNodes[0].innerHTML=this.signInfo.left.leftStaNumber,t.attributes.fill.value=this.signInfo.left.leftTextColor,t=this.$refs.svg.getElementById("leftIconOuter"),t.attributes.stroke.value=this.signInfo.left.leftTextColor,t=this.$refs.svg.getElementById("leftIconInner"),t.attributes.stroke.value=this.signInfo.left.leftTextColor,t.attributes.fill.value=this.signInfo.left.leftTextColor,t=this.$refs.svg.getElementById("lineAbbr"),t.childNodes[0].innerHTML=this.signInfo.middle.lineAbbr,t.attributes.fill.value=this.signInfo.backgroundColor,t=this.$refs.svg.getElementById("abbrIcon"),t.attributes.fill.value=this.signInfo.main.mainTextColor,t.attributes.stroke.value=this.signInfo.main.mainTextColor,t=this.$refs.svg.getElementById("lineName"),t.childNodes[0].innerHTML=this.signInfo.middle.lineName,t.attributes.fill.value=this.signInfo.main.mainTextColor,t=this.$refs.svg.getElementById("middleStaNumber"),t.childNodes[0].innerHTML=this.signInfo.middle.middleStaNumber,t.attributes.fill.value=this.signInfo.main.mainTextColor,t=this.$refs.svg.getElementById("lineColorBelt1"),t.attributes.stroke.value=this.signInfo.lineColor,t=this.$refs.svg.getElementById("lineColorBelt2"),t.attributes.stroke.value=this.signInfo.secondLine.color,t=this.$refs.svg.getElementById("background"),t.attributes[3].value=this.signInfo.frameThickness,t.attributes.fill.value=this.signInfo.backgroundColor,t=this.$refs.svg.getElementById("leftEpli"),t.attributes.fill.value=this.signInfo.backgroundColor,t=this.$refs.svg.getElementById("rightEpli"),t.attributes.fill.value=this.signInfo.backgroundColor,t=this.$refs.svg.getElementById("middleEpli"),t.attributes.fill.value=this.signInfo.backgroundColor,t=this.$refs.svg.getElementById("towardArrow"),this.signInfo.displayForwardArrow?t.attributes.visibility.value="visible":t.attributes.visibility.value="hidden",t=this.$refs.svg.getElementById("Toward"),t.attributes.fill.value=this.signInfo.main.mainTextColor,this.signInfo.chnCharacterBold?(t=this.$refs.svg.getElementById("staNameChinese"),t.attributes[5].value="bold",t=this.$refs.svg.getElementById("rightStaNameChinese"),t.attributes[6].value="bold",t=this.$refs.svg.getElementById("leftStaNameChinese"),t.attributes[4].value="bold"):(t=this.$refs.svg.getElementById("staNameChinese"),t.attributes[5].value="normal",t=this.$refs.svg.getElementById("rightStaNameChinese"),t.attributes[6].value="normal",t=this.$refs.svg.getElementById("leftStaNameChinese"),t.attributes[4].value="normal"),this.convertToCanvas()},RequireRearrange(t,e,n){let i,o,s,a,r,l,u,g,c;this.lightStyle=t,this.signInfo=e,this.output=n,i=this.output.outputWidth-600,o=this.output.outputHeight-200,u=this.signInfo.frameThickness/2,r=this.output.outputWidth-this.signInfo.frameThickness/2,l=o/2,this.signInfo.secondLine.enable?(c=this.$refs.svg.getElementById("lineColorBelt2"),c.attributes.visibility.value="enable",c.attributes[1].value=u,c.attributes[3].value=r,c.attributes[2].value=l+183.25,c.attributes[4].value=l+183.25,c.attributes[8].value=7.5,c=this.$refs.svg.getElementById("lineColorBelt1"),c.attributes[1].value=u,c.attributes[3].value=r,c.attributes[2].value=l+176.75,c.attributes[4].value=l+176.75,c.attributes[8].value=7.5):(c=this.$refs.svg.getElementById("lineColorBelt2"),c.attributes.visibility.value="hidden",c.attributes[1].value=u,c.attributes[3].value=r,c.attributes[2].value=l+180,c.attributes[4].value=l+180,c.attributes[8].value=15,c=this.$refs.svg.getElementById("lineColorBelt1"),c.attributes[1].value=u,c.attributes[3].value=r,c.attributes[2].value=l+180,c.attributes[4].value=l+180,c.attributes[8].value=15),c=this.$refs.svg.getElementById("background"),c.attributes.width.value=this.output.outputWidth,c.attributes.height.value=this.output.outputHeight,c=this.$refs.svg.getElementById("staNameChinese"),s=c.getBBox().width,u=240,g=60,r=u-s+i/2,l=g+o/4,c.attributes.x.value=r,c.attributes.y.value=l,c=this.$refs.svg.getElementById("staNameEnglish"),u=255,g=65,r=u+i/2,l=g+o/4,c.attributes.x.value=r,c.attributes.y.value=l,c=this.$refs.svg.getElementById("staNameKana"),u=255,g=30,r=u+i/2,l=g+o/4,c.attributes.x.value=r,c.attributes.y.value=l,u=45,g=35,r=u+i/2,l=g+o/2,c=this.$refs.svg.getElementById("middleIcon"),c.attributes.transform.value="translate("+r.toString()+", "+l.toString()+")",u=0,g=0,r=u+i/2,l=g+o/2,c=this.$refs.svg.getElementById("middleEpli"),c.attributes.transform.value="translate("+r.toString()+", "+l.toString()+")",u=21,c=this.$refs.svg.getElementById("leftStaNumber"),s=c.getBBox().width,r=21-s/2+8,c.attributes[2].value=r;let d=this.$refs.svg.getElementById("lineAbbr");u=0,g=0,l=g+o/2,s=d.getBBox().width,d=this.$refs.svg.getElementById("lineName"),a=d.getBBox().width,c=this.$refs.svg.getElementById("abbrIcon"),c.attributes[7].value=s+10,r=s-10,c=this.$refs.svg.getElementById("lineName"),c.attributes[2].value=r+90,r=r=(s+a+5-i)/2,c=this.$refs.svg.getElementById("lineInfo"),s+a===0&&(r=8+i/2),c.attributes.transform.value="translate("+(u-r).toString()+", "+l.toString()+")",u=29,g=120,l=g+o/2,c=this.$refs.svg.getElementById("Left"),c.attributes.transform.value="translate("+u.toString()+", "+l.toString()+")",c=this.$refs.svg.getElementById("leftStaNameChinese"),u=60,g=5,s=c.getBBox().width,r=s+10,0===s&&(r=0),c=this.$refs.svg.getElementById("leftIcon"),c.attributes.transform.value="translate("+r.toString()+", "+g.toString()+")",u=13,c=this.$refs.svg.getElementById("leftStaNumber"),s=c.getBBox().width,r=13-s/2+6,c.attributes[2].value=r,u=472,g=120,r=u+i,l=g+o/2,c=this.$refs.svg.getElementById("Right"),c.attributes.transform.value="translate("+r.toString()+", "+l.toString()+")",u=84,c=this.$refs.svg.getElementById("rightStaNameChinese"),s=c.getBBox().width,r=u-s,c.attributes[2].value=r,c=this.$refs.svg.getElementById("rightIcon"),r=40-s,c.attributes.transform.value="translate("+r.toString()+", 5)",c=this.$refs.svg.getElementById("rightStaNameEnglish"),s=c.getBBox().width,r=u-s,c.attributes[2].value=r,u=13,c=this.$refs.svg.getElementById("rightStaNumber"),s=c.getBBox().width,r=13-s/2+6,c.attributes[2].value=r,u=595,g=200,r=u+i,l=g-o/2,c=this.$refs.svg.getElementById("towardArrow"),"right"===this.signInfo.direction?c.attributes.transform.value="translate("+r.toString()+", "+l.toString()+") rotate(180)":"left"===this.signInfo.direction&&(l=o/2,c.attributes.transform.value="translate(0"+l.toString()+") rotate(0)"),this.UpdateSignData()},convertToCanvas(){let t=this.newSvgConstructor(),e=this.output.outputWidth,n=this.output.outputHeight,i=t.cloneNode(!0),o=i.outerHTML,s=new Blob([o],{type:"image/svg+xml;charset=utf-8"}),a=window.URL||window.webkitURL||window,r=a.createObjectURL(s),l=new Image;l.onload=()=>{let t=document.getElementById("sign-canvas");t.width=e,t.height=n;let i=t.getContext("2d");i.drawImage(l,0,0,e,n)},l.src=r},newSvgConstructor(){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("version","1.1"),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("id","svg-sign"),t.setAttribute("class","sign"),t.setAttribute("viewBox","0 0 "+this.output.outputWidth.toString()+" "+this.output.outputHeight.toString()),t.setAttribute("width",this.output.outputWidth.toString()),t.setAttribute("height",this.output.outputHeight.toString());let e=document.getElementById("svg-inner");return t.appendChild(e.cloneNode(!0)),t}}},b=y,I=(0,c.Z)(b,p,v,!1,null,"466cd7ac",null),S=I.exports,w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"download-viewer"},[t._m(0),e("div",{staticClass:"form"},[e("div",{staticClass:"row"},[e("div",[t._m(1),e("div",{staticClass:"form-min-row"},[e("p",[t._v("导出格式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.fileType,expression:"fileType"}],class:{"not-chose":""===this.fileType},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.fileType=e.target.multiple?n:n[0]}}},[e("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),e("option",{attrs:{value:"json"}},[t._v(".json")]),e("option",{attrs:{value:"png"}},[t._v(".png")]),e("option",{attrs:{value:"jpg"}},[t._v(".jpg")])])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("文件名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.fileName,expression:"fileName"}],attrs:{placeholder:"请输入",type:"text"},domProps:{value:t.fileName},on:{input:function(e){e.target.composing||(t.fileName=e.target.value)}}})]),"json"!==this.fileType?e("div",{staticClass:"form-min-row"},[e("p",[t._v("文件质量")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.fileQuality,expression:"fileQuality"}],attrs:{max:"100",min:"0",type:"range"},domProps:{value:t.fileQuality},on:{__r:function(e){t.fileQuality=e.target.value}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.fileQuality,expression:"fileQuality"}],attrs:{max:"100",min:"0",type:"number"},domProps:{value:t.fileQuality},on:{input:function(e){e.target.composing||(t.fileQuality=e.target.value)}}})]):t._e()]),e("div",{staticClass:"download-tools"},[t._m(2),t._m(3),e("div",{staticClass:"form-min-row action-button"},[e("button",{staticClass:"material-symbols-outlined icon-action",attrs:{disabled:""===this.fileType,title:"下载文件"},on:{click:t.downloadItems}},[t._v("cloud_download")]),e("button",{staticClass:"material-symbols-outlined icon-action",attrs:{title:"返回编辑器"},on:{click:t.switchViewerReturn}},[t._v("undo")])])])])])])},A=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"canvas"},[e("canvas",{attrs:{id:"preview-sign-canvas"}})])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("tune")]),t._v("导出设置")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("ads_click")]),t._v("操作")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-min-row"},[e("p",{staticClass:"hint"},[t._v("在下载前，请确认您所需要的变更已执行并确认显示正确。")]),e("p",{staticClass:"hint"},[t._v("若不正确，请返回并使用刷新以强制执行更改")]),e("p",{staticClass:"hint"},[t._v("若无任何图像信息，请选择一种站牌样式或返回编辑器以编辑。")])])}],_={name:"downloadViewer",data(){return{signStyle:"kitajuku-dentetsu",fileName:"",fileType:"",fileQuality:100,jsonCache:{}}},methods:{switchViewerReturn(){this.$emit("switchViewer","")},convertToCanvas(){let t,e,n,i=sessionStorage.getItem("instanceSignStyle");"kitajuku-dentetsu"===i?(t="svg-sign",e="svg-inner",n="instanceConfig"):"test-sign"===i?(t="sign-entrance",n="instanceConfigEntrance"):"FTA-station"===i?(t="svg-sign-FTA-station",e="svg-inner-FTAS",n="instanceConfigFTAStation"):"FTA-guide"===i&&(t="svg-sign-FTA-guide",e="svg-inner-FTAG",n="instanceConfigFTAGuide");let o=this.newSvgConstructor(t,e,n),s=JSON.parse(sessionStorage.getItem(n)),a=s.output.outputWidth,r=s.output.outputHeight,l=o.cloneNode(!0),u=l.outerHTML,g=new Blob([u],{type:"image/svg+xml;charset=utf-8"}),c=window.URL||window.webkitURL||window,d=c.createObjectURL(g),m=new Image;m.onload=()=>{let t=document.getElementById("preview-sign-canvas");t.width=a,t.height=r;let e=t.getContext("2d");e.drawImage(m,0,0,a,r)},m.src=d},downloadItems(){let t,e=this.fileQuality/100,n=document.getElementById("preview-sign-canvas"),i=n.toDataURL("image/png",e),o=n.toDataURL("image/jpeg",e),s=this.configVersionModifier(),a=function(t,e){let n=document.createElement("a");n.download=e,n.style.opacity="0",document.body.append(n),n.href=t,n.click(),n.remove()};t=""===this.fileName?sessionStorage.getItem("instanceSignStyle"):this.fileName,"png"===this.fileType?a(i,t+".png"):"jpg"===this.fileType?a(o,t+".jpg"):"json"===this.fileType&&a(s,t+".json")},configVersionModifier(){let t,e=sessionStorage.getItem("instanceSignStyle");"kitajuku-dentetsu"===e?t="instanceConfig":"test-sign"===e?t="instanceConfigEntrance":"FTA-station"===e?t="instanceConfigFTAStation":"FTA-guide"===e&&(t="instanceConfigFTAGuide");let n=JSON.parse(sessionStorage.getItem(t));n.configVersion="beta-v0.1.1";let i=JSON.stringify(n);return"data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(i)},newSvgConstructor(t,e,n){let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("version","1.1"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),i.setAttribute("id",t),i.setAttribute("class","sign");let o=JSON.parse(sessionStorage.getItem(n));i.setAttribute("viewBox","0 0 "+o.output.outputWidth.toString()+" "+o.output.outputHeight.toString());let s=document.getElementById(e);if(i.appendChild(s.cloneNode(!0)),"svg-inner-FTAG"===e){let t=document.getElementById("reserved-icons");i.appendChild(t.cloneNode(!0))}return i}}},N=_,T=(0,c.Z)(N,w,A,!1,null,"3ff1d86e",null),x=T.exports,F={name:"sideTools",data(){return{status_clicked:!1,isSolid:!1,isVisible:!1}},mounted(){window.addEventListener("scroll",this.handleScroll)},methods:{handleScroll(){let t,e=window.scrollY;e>=70?(t="on",this.solidTrigger(t)):e<70&&(t="off",this.solidTrigger(t))},solidTrigger(t){let e=this.isSolid;!1===e&&"on"===t?(this.isVisible=!0,this.isSolid=!0):!0===e&&"off"===t&&(this.isVisible=!1,this.isSolid=!1)},hiddenTrigger(){this.status_clicked=!this.status_clicked},requestRearrange(){this.$emit("contentNeedRearrange",S.data().lightStyle,S.data().signInfo,S.data().output)},scrollToTop(){let t,e=document.documentElement.scrollTop;t=window.setInterval((function(){e-=20,e<=0&&window.clearInterval(t),window.scrollTo(0,e)}),10)},switchViewerDownload(){this.$emit("switchViewer","download"),x.methods.convertToCanvas()},switchViewerUpload(){this.$emit("switchViewer","upload")}},beforeDestroy(){window.removeEventListener("scroll",this.handleScroll)}},L=F,E=(0,c.Z)(L,h,f,!1,null,"0d71dc30",null),k=E.exports,R=function(){var t=this,e=t._self._c;return e("footer",[e("div",{staticClass:"footer-flex"},[e("div",{attrs:{id:"footer-description"}},[e("p",[t._v(" "+t._s(t.title)+" - Beta"),e("br"),t._v(" 是由 Cenlinc Studio 开发的导视牌生成器。 ")])]),e("div",{attrs:{id:"teleport"}},[e("a",{attrs:{id:"teleport-nav-twitter",href:"https://twitter.com/Fetarute"}},[e("svg",{attrs:{viewBox:"0 0 2000 1625.36",width:"30",height:"30",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"m 1999.9999,192.4 c -73.58,32.64 -152.67,54.69 -235.66,64.61 84.7,-50.78 149.77,-131.19 180.41,-227.01 -79.29,47.03 -167.1,81.17 -260.57,99.57 C 1609.3399,49.82 1502.6999,0 1384.6799,0 c -226.6,0 -410.328,183.71 -410.328,410.31 0,32.16 3.628,63.48 10.625,93.51 -341.016,-17.11 -643.368,-180.47 -845.739,-428.72 -35.324,60.6 -55.5583,131.09 -55.5583,206.29 0,142.36 72.4373,267.95 182.5433,341.53 -67.262,-2.13 -130.535,-20.59 -185.8519,-51.32 -0.039,1.71 -0.039,3.42 -0.039,5.16 0,198.803 141.441,364.635 329.145,402.342 -34.426,9.375 -70.676,14.395 -108.098,14.395 -26.441,0 -52.145,-2.578 -77.203,-7.364 52.215,163.008 203.75,281.649 383.304,284.946 -140.429,110.062 -317.351,175.66 -509.5972,175.66 -33.1211,0 -65.7851,-1.949 -97.8828,-5.738 181.586,116.4176 397.27,184.359 628.988,184.359 754.732,0 1167.462,-625.238 1167.462,-1167.47 0,-17.79 -0.41,-35.48 -1.2,-53.08 80.1799,-57.86 149.7399,-130.12 204.7499,-212.41"}})])])]),t._m(0)])])},$=[function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"copyright-explanation"}},[t._v(" Powered by Fetarute Community"),e("br"),t._v(" 导视牌设计版权所有 © 2022 Team Cenlinc ")])}],B={name:"flex-footer",props:["title"]},O=B,P=(0,c.Z)(O,R,$,!1,null,"142c4b2e",null),D=P.exports,W=function(){var t=this,e=t._self._c;return e("div",{staticClass:"form",attrs:{id:"editor"}},[e("div",{staticClass:"row"},[e("div",[t._m(0),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站牌样式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.signStyle,expression:"signStyle"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.signStyle=e.target.multiple?n:n[0]},t.sendSign]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),e("option",{attrs:{value:"test-sign"}},[t._v("测试用")]),e("option",{attrs:{value:"kitajuku-dentetsu"}},[t._v("北宿电铁")]),e("option",{attrs:{value:"FTA-station"}},[t._v("FTA 车站牌")]),e("option",{attrs:{value:"FTA-guide"}},[t._v("FTA 导视牌")])])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("灯光效果")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.lightStyle,expression:"lightStyle"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.lightStyle=e.target.multiple?n:n[0]},t.sendData]}},[e("option",{attrs:{value:"none"}},[t._v("无")]),e("option",{attrs:{value:"fluore"}},[t._v("荧光灯")]),e("option",{attrs:{value:"led"}},[t._v("LED")])])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站名汉字字符强调")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.chnCharacterBold,expression:"signInfo.chnCharacterBold"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.signInfo.chnCharacterBold)?t._i(t.signInfo.chnCharacterBold,null)>-1:t.signInfo.chnCharacterBold},on:{change:[function(e){var n=t.signInfo.chnCharacterBold,i=e.target,o=!!i.checked;if(Array.isArray(n)){var s=null,a=t._i(n,s);i.checked?a<0&&t.$set(t.signInfo,"chnCharacterBold",n.concat([s])):a>-1&&t.$set(t.signInfo,"chnCharacterBold",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.signInfo,"chnCharacterBold",o)},t.sendData]}})]),e("div",{staticClass:"form-min-row"},[e("button",{staticClass:"button-alert",on:{click:t.requestRearrange}},[t._v("刷新数据")]),e("button",{staticClass:"button-danger",on:{click:t.resetData}},[t._v("重置数据")])])]),e("div",[t._m(1),e("div",{staticClass:"form-min-row"},[e("p",[t._v("宽度")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.output.outputWidth,expression:"output.outputWidth"}],attrs:{placeholder:"600",min:"0",type:"number",value:"600"},domProps:{value:t.output.outputWidth},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.output,"outputWidth",e.target.value)}}}),t._v(" px")])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("高度")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.output.outputHeight,expression:"output.outputHeight"}],attrs:{placeholder:"200",min:"0",type:"number",value:"200"},domProps:{value:t.output.outputHeight},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.output,"outputHeight",e.target.value)}}}),t._v(" px")])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("边框大小")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.frameThickness,expression:"signInfo.frameThickness"}],attrs:{placeholder:"4",value:"4",min:"0",type:"number"},domProps:{value:t.signInfo.frameThickness},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo,"frameThickness",e.target.value)}}}),t._v(" px")])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("显示行进方向箭头")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.displayForwardArrow,expression:"signInfo.displayForwardArrow"}],attrs:{checked:"checked",type:"checkbox"},domProps:{checked:Array.isArray(t.signInfo.displayForwardArrow)?t._i(t.signInfo.displayForwardArrow,null)>-1:t.signInfo.displayForwardArrow},on:{change:[function(e){var n=t.signInfo.displayForwardArrow,i=e.target,o=!!i.checked;if(Array.isArray(n)){var s=null,a=t._i(n,s);i.checked?a<0&&t.$set(t.signInfo,"displayForwardArrow",n.concat([s])):a>-1&&t.$set(t.signInfo,"displayForwardArrow",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.signInfo,"displayForwardArrow",o)},t.sendData]}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("方向相关")]),e("div",[e("input",{staticClass:"button",attrs:{value:"  反转左右信息  ",type:"button"},on:{click:t.reverseLeftRight}}),e("input",{staticClass:"button",attrs:{value:"  改变行进方向  ",type:"button"},on:{click:t.changeDirection}})])])])]),e("div",{staticClass:"row"},[e("div",[t._m(2),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站名 中文")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.main.staNameChinese,expression:"signInfo.main.staNameChinese"}],attrs:{type:"text"},domProps:{value:t.signInfo.main.staNameChinese},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.main,"staNameChinese",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站名 英语")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.main.staNameEnglish,expression:"signInfo.main.staNameEnglish"}],attrs:{type:"text"},domProps:{value:t.signInfo.main.staNameEnglish},on:{change:t.sendData,input:function(e){e.target.composing||t.$set(t.signInfo.main,"staNameEnglish",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站名 假名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.main.staNameKana,expression:"signInfo.main.staNameKana"}],attrs:{type:"text"},domProps:{value:t.signInfo.main.staNameKana},on:{change:t.sendData,input:function(e){e.target.composing||t.$set(t.signInfo.main,"staNameKana",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("本站编号")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.middle.middleStaNumber,expression:"signInfo.middle.middleStaNumber"}],attrs:{type:"text"},domProps:{value:t.signInfo.middle.middleStaNumber},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.middle,"middleStaNumber",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("字体颜色")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.main.mainTextColor,expression:"signInfo.main.mainTextColor"}],attrs:{type:"color"},domProps:{value:t.signInfo.main.mainTextColor},on:{change:t.sendData,input:function(e){e.target.composing||t.$set(t.signInfo.main,"mainTextColor",e.target.value)}}})])]),e("div",[t._m(3),e("div",{staticClass:"form-min-row"},[e("p",[t._v("线路颜色")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.lineColor,expression:"signInfo.lineColor"}],attrs:{type:"color"},domProps:{value:t.signInfo.lineColor},on:{change:t.sendData,input:function(e){e.target.composing||t.$set(t.signInfo,"lineColor",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("背景颜色")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.backgroundColor,expression:"signInfo.backgroundColor"}],attrs:{type:"color"},domProps:{value:t.signInfo.backgroundColor},on:{change:t.sendData,input:function(e){e.target.composing||t.$set(t.signInfo,"backgroundColor",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("线路名称")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.middle.lineName,expression:"signInfo.middle.lineName"}],attrs:{type:"text"},domProps:{value:t.signInfo.middle.lineName},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.middle,"lineName",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("线路缩写")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.middle.lineAbbr,expression:"signInfo.middle.lineAbbr"}],attrs:{type:"text"},domProps:{value:t.signInfo.middle.lineAbbr},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.middle,"lineAbbr",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("[测试] 使用第二条色带")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.secondLine.enable,expression:"signInfo.secondLine.enable"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.signInfo.secondLine.enable)?t._i(t.signInfo.secondLine.enable,null)>-1:t.signInfo.secondLine.enable},on:{change:[function(e){var n=t.signInfo.secondLine.enable,i=e.target,o=!!i.checked;if(Array.isArray(n)){var s=null,a=t._i(n,s);i.checked?a<0&&t.$set(t.signInfo.secondLine,"enable",n.concat([s])):a>-1&&t.$set(t.signInfo.secondLine,"enable",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.signInfo.secondLine,"enable",o)},t.requestRearrange]}})]),t.signInfo.secondLine.enable?e("div",{staticClass:"form-min-row"},[e("p",[t._v("第二条线路颜色")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.secondLine.color,expression:"signInfo.secondLine.color"}],attrs:{type:"color"},domProps:{value:t.signInfo.secondLine.color},on:{change:t.sendData,input:function(e){e.target.composing||t.$set(t.signInfo.secondLine,"color",e.target.value)}}})]):t._e()])]),e("div",{staticClass:"row"},[e("div",[t._m(4),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站名 中文")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.left.leftStaNameChinese,expression:"signInfo.left.leftStaNameChinese"}],attrs:{value:"锦冈",type:"text"},domProps:{value:t.signInfo.left.leftStaNameChinese},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.left,"leftStaNameChinese",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站名 英语")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.left.leftStaNameEnglish,expression:"signInfo.left.leftStaNameEnglish"}],attrs:{value:"Nishikioka",type:"text"},domProps:{value:t.signInfo.left.leftStaNameEnglish},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.left,"leftStaNameEnglish",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站点编号")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.left.leftStaNumber,expression:"signInfo.left.leftStaNumber"}],attrs:{value:"04",type:"text"},domProps:{value:t.signInfo.left.leftStaNumber},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.left,"leftStaNumber",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("字体颜色")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.left.leftTextColor,expression:"signInfo.left.leftTextColor"}],attrs:{type:"color"},domProps:{value:t.signInfo.left.leftTextColor},on:{change:t.sendData,input:function(e){e.target.composing||t.$set(t.signInfo.left,"leftTextColor",e.target.value)}}})])]),e("div",[t._m(5),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站名 中文")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.right.rightStaNameChinese,expression:"signInfo.right.rightStaNameChinese"}],attrs:{value:"北宿",type:"text"},domProps:{value:t.signInfo.right.rightStaNameChinese},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.right,"rightStaNameChinese",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站名 英语")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.right.rightStaNameEnglish,expression:"signInfo.right.rightStaNameEnglish"}],attrs:{value:"Hokuriku",type:"text"},domProps:{value:t.signInfo.right.rightStaNameEnglish},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.right,"rightStaNameEnglish",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站点编号")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.right.rightStaNumber,expression:"signInfo.right.rightStaNumber"}],attrs:{value:"02",type:"text"},domProps:{value:t.signInfo.right.rightStaNumber},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.right,"rightStaNumber",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("字体颜色")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.right.rightTextColor,expression:"signInfo.right.rightTextColor"}],attrs:{type:"color"},domProps:{value:t.signInfo.right.rightTextColor},on:{change:t.sendData,input:function(e){e.target.composing||t.$set(t.signInfo.right,"rightTextColor",e.target.value)}}})])])])])},U=[function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("palette")]),t._v("FesGen编辑器设置")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("tune")]),t._v("北宿电铁-站牌: 全局设置")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("info")]),t._v("本站信息")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("info")]),t._v("主要信息")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("info")]),t._v("左侧站点信息")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("info")]),t._v("右侧站点信息")])}],H={name:"editorView",data(){return{signStyle:"kitajuku-dentetsu",lightStyle:"fluore",output:{outputWidth:600,outputHeight:200},signInfo:{main:{staNameEnglish:"Kaihin-Shukukai",staNameChinese:"海浜宿海",staNameKana:"かいひんしゅくかい",mainTextColor:"#383838"},left:{leftStaNumber:"04",leftStaNameEnglish:"Nishikioka",leftStaNameChinese:"錦岡",leftTextColor:"#383838"},middle:{lineName:"東海岸本線",lineAbbr:"T",middleStaNumber:"03"},right:{rightStaNumber:"02",rightStaNameEnglish:"Kitajuku",rightStaNameChinese:"北宿",rightTextColor:"#7A7A7A"},secondLine:{enable:!1,color:"#A0D4E7"},lineColor:"#7297DD",backgroundColor:"#ECECEC",frameThickness:4,displayForwardArrow:!0,chnCharacterBold:!1,direction:"left"}}},mounted(){this.reloadCache(),this.$emit("someChanged",this.lightStyle,this.signInfo,this.output),this.$emit("contentNeedRearrange",this.lightStyle,this.signInfo,this.output),this.dataToJson()},methods:{sendData(){this.dataToJson(),this.$emit("someChanged",this.lightStyle,this.signInfo,this.output)},sendSign(){this.dataToJson(),this.$emit("signChanged",this.signStyle,this.lightStyle,this.signInfo,this.output)},requestRearrange(){this.dataToJson(),this.$emit("contentNeedRearrange",this.lightStyle,this.signInfo,this.output)},changeDirection(){"left"===this.signInfo.direction?this.signInfo.direction="right":(this.signInfo.direction,this.signInfo.direction="left"),this.dataToJson(),this.$emit("contentNeedRearrange",this.lightStyle,this.signInfo,this.output)},reverseLeftRight(){let t,e;t=this.signInfo.left.leftStaNameChinese,e=this.signInfo.right.rightStaNameChinese,this.signInfo.left.leftStaNameChinese=e,this.signInfo.right.rightStaNameChinese=t,t=this.signInfo.left.leftStaNameEnglish,e=this.signInfo.right.rightStaNameEnglish,this.signInfo.left.leftStaNameEnglish=e,this.signInfo.right.rightStaNameEnglish=t,t=this.signInfo.left.leftStaNumber,e=this.signInfo.right.rightStaNumber,this.signInfo.left.leftStaNumber=e,this.signInfo.right.rightStaNumber=t,t=this.signInfo.left.leftTextColor,e=this.signInfo.right.rightTextColor,this.signInfo.left.leftTextColor=e,this.signInfo.right.rightTextColor=t,this.dataToJson(),this.$emit("contentNeedRearrange",this.lightStyle,this.signInfo,this.output)},dataToJson(){let t=JSON.stringify(this.$data);sessionStorage.setItem("instanceConfig",t)},reloadCache(){if(null!==sessionStorage.getItem("instanceConfig")){let t=JSON.parse(sessionStorage.getItem("instanceConfig"));this.signInfo=t.signInfo,this.lightStyle=t.lightStyle,this.output=t.output,this.$emit("contentNeedRearrange",this.lightStyle,this.signInfo,this.output)}},resetData(){this.lightStyle="fluore",this.output={outputWidth:600,outputHeight:200},this.signInfo={main:{staNameEnglish:"Kaihin-Shukukai",staNameChinese:"海浜宿海",staNameKana:"かいひんしゅくかい",mainTextColor:"#383838"},left:{leftStaNumber:"04",leftStaNameEnglish:"Nishikioka",leftStaNameChinese:"錦岡",leftTextColor:"#383838"},middle:{lineName:"東海岸本線",lineAbbr:"T",middleStaNumber:"03"},right:{rightStaNumber:"02",rightStaNameEnglish:"Kitajuku",rightStaNameChinese:"北宿",rightTextColor:"#7A7A7A"},secondLine:{enable:!1,color:"#A0D4E7"},lineColor:"#7297DD",backgroundColor:"#ECECEC",frameThickness:4,displayForwardArrow:!0,chnCharacterBold:!1,direction:"left"},this.dataToJson(),this.$emit("contentNeedRearrange",this.lightStyle,this.signInfo,this.output)}}},M=H,V=(0,c.Z)(M,W,U,!1,null,"111705aa",null),q=V.exports,j=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"canvas"}},[e("keep-alive",[e(this.signStyle,{ref:"svg",tag:"component",attrs:{id:"sign-entrance"}})],1),e("div",{staticClass:"data"},[e("p",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v(t._s(this.signInfo||"NO"))])])],1)},J=[],G=n.p+"img/test-sign.cd2328b2.svg";window.componentsConfig={"test-sign":"../../assets/signs/test-sign.svg"};var K={name:"entranceGuideSign",components:{TestSign:G},data(){return{signStyle:"test-sign",lightStyle:"fluore",output:{outputWidth:0,outputHeight:0},signInfo:{}}},updated(){this.UpdateSignData()},methods:{UpdateData(t,e,n){this.lightStyle=e,this.signInfo=t,this.output=n},UpdateSignStyle(t){this.signStyle=t},UpdateSignData(){console.log("Under Construction")}}},Z=K,Q=(0,c.Z)(Z,j,J,!1,null,"62a42356",null),z=Q.exports,X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"form",attrs:{id:"editor"}},[e("div",{staticClass:"form",attrs:{id:"editor"}},[e("div",{staticClass:"row"},[e("div",[t._m(0),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站牌样式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.signStyle,expression:"signStyle"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.signStyle=e.target.multiple?n:n[0]},t.sendSign]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),e("option",{attrs:{value:"test-sign"}},[t._v("测试用")]),e("option",{attrs:{value:"kitajuku-dentetsu"}},[t._v("北宿电铁")]),e("option",{attrs:{value:"FTA-station"}},[t._v("FTA 车站牌")]),e("option",{attrs:{value:"FTA-guide"}},[t._v("FTA 导视牌")])])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("灯光效果")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.lightStyle,expression:"lightStyle"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.lightStyle=e.target.multiple?n:n[0]},t.sendData]}},[e("option",{attrs:{value:"none"}},[t._v("无")]),e("option",{attrs:{value:"fluore"}},[t._v("荧光灯")]),e("option",{attrs:{value:"led"}},[t._v("LED")])])])])])])])},Y=[function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("palette")]),t._v("FesGen编辑器设置")])}],tt={name:"entranceGuideEditor",data(){return{signStyle:"test-sign",lightStyle:"fluore",output:{outputWidth:0,outputHeight:0},signInfo:{}}},mounted(){this.reloadCache(),this.dataToJson()},methods:{sendData(){this.dataToJson(),this.$emit("someChanged",this.lightStyle,this.signInfo,this.output)},sendSign(){this.dataToJson(),this.$emit("signChanged",this.signStyle,this.lightStyle,this.signInfo,this.output)},dataToJson(){let t=JSON.stringify(this.$data);sessionStorage.setItem("instanceConfigEntrance",t)},reloadCache(){if(null!==sessionStorage.getItem("instanceConfigEntrance")){let t=JSON.parse(sessionStorage.getItem("instanceConfigEntrance"));"test-sign"===t.signStyle&&(this.signInfo=t.signInfo,this.signStyle=t.signStyle,this.lightStyle=t.lightStyle,this.output=t.output,this.$emit("contentNeedRearrange",this.lightStyle,this.signInfo,this.output))}}}},et=tt,nt=(0,c.Z)(et,X,Y,!1,null,"65595492",null),it=nt.exports,ot=function(){var t=this,e=t._self._c;return e("div",{staticClass:"upload-viewer"},[e("div",{staticClass:"canvas"}),e("div",{staticClass:"submission-form",attrs:{id:"drop-area"}},[e("input",{staticClass:"file",attrs:{type:"file",draggable:"true",id:"input-file"}}),this.dropActive?t._e():e("label",{attrs:{id:"label-file",for:"input-file",draggable:"true"}},[e("span",{staticClass:"material-symbols-outlined icon-upload"},[t._v("cloud_upload")]),e("br"),t._v("请选择1个文件以上传")]),this.dropActive?e("label",{attrs:{id:"drag-file"}},[e("span",{staticClass:"material-symbols-outlined icon-upload"},[t._v("cloud_upload")]),e("br"),t._v("将文件拖到此处")]):t._e()]),e("div",{staticClass:"form"},[e("div",{staticClass:"row"},[e("div",[t._m(0),e("div",{staticClass:"form-min-row"},[this.correctFormat?e("p",[t._v("文件格式")]):t._e(),this.correctFormat?t._e():e("p",{staticClass:"danger"},[t._v("错误的格式文件格式")]),e("input",{directives:[{name:"model",rawName:"v-model",value:this.correctFormat,expression:"this.correctFormat"}],attrs:{type:"checkbox",disabled:"disabled"},domProps:{checked:Array.isArray(this.correctFormat)?t._i(this.correctFormat,null)>-1:this.correctFormat},on:{change:function(e){var n=this.correctFormat,i=e.target,o=!!i.checked;if(Array.isArray(n)){var s=null,a=t._i(n,s);i.checked?a<0&&t.$set(this,"correctFormat",n.concat([s])):a>-1&&t.$set(this,"correctFormat",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(this,"correctFormat",o)}}})])]),e("div",[t._m(1),e("div",{staticClass:"form-min-row"},[this.wrongFileCount?e("p",{staticClass:"danger"},[t._v("请上传 1 个文件！")]):t._e(),this.completeness?e("p",{staticClass:"danger"},[t._v("文件不完整！")]):t._e()]),t._m(2),e("div",{staticClass:"form-min-row"},[e("button",{staticClass:"material-symbols-outlined icon-action",attrs:{disabled:!this.completeness&&!this.correctFormat,title:"导入"},on:{click:t.switchStyle}},[t._v("input")]),e("button",{staticClass:"material-symbols-outlined icon-action",attrs:{title:"返回编辑器"},on:{click:t.switchViewerReturn}},[t._v("undo")])])])])])])},st=[function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("done")]),t._v("导入检查器")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("ads_click")]),t._v("操作与提示")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-min-row"},[e("p",{staticClass:"alert"},[t._v("导入检查器会自动检查提交的文件")]),e("p",{staticClass:"alert"},[t._v("检查器检查完毕后请检查是否为上传的文件")]),e("p",{staticClass:"alert"},[t._v("若正确请点击按钮以跳转")])])}],at={name:"uploadViewer",data(){return{sign:"",dropActive:!1,correctFormat:!1,completeness:!1,wrongFileCount:!1}},mounted(){let t=document.getElementById("drop-area");t.addEventListener("drop",this.dropEvent,!1),t.addEventListener("dragleave",(t=>{t.stopPropagation(),t.preventDefault(),this.dropActive=!1})),t.addEventListener("dragenter",(t=>{t.stopPropagation(),t.preventDefault(),this.dropActive=!0})),t.addEventListener("dragover",(t=>{t.stopPropagation(),t.preventDefault(),this.dropActive=!0}))},methods:{switchViewerReturn(){this.$emit("switchViewer","")},dropEvent(t){this.dropActive=!1,t.stopPropagation(),t.preventDefault(),this.checkFile(t.dataTransfer.files)},checkFile(t){if(t.length>=2)this.wrongFileCount=!0;else{this.wrongFileCount=!1;let e=t[0].name;const n=e.split(".");let i=n[n.length-1];if("json"===i){this.correctFormat=!0;let e=t[0],n=new FileReader;n.readAsText(e,"utf-8"),n.onload=function(){let t=JSON.parse(this.result);try{let e=t.configVersion;"beta-v0.1.1"===e&&("kitajuku-dentetsu"===t.signStyle?sessionStorage.setItem("instanceConfig",this.result):"test-sign"===t.signStyle?sessionStorage.setItem("instanceConfigEntrance",this.result):"FTA-station"===t.signStyle?sessionStorage.setItem("instanceConfigFTAStation",this.result):"FTA-guide"===t.signStyle&&sessionStorage.setItem("instanceConfigFTAGuide",this.result),sessionStorage.setItem("instanceSignStyle",t.signStyle)),this.completeness=!0}catch(e){this.completeness=!1}}}else this.correctFormat=!1}},switchStyle(){this.$emit("switchStyle",sessionStorage.getItem("instanceSignStyle")),this.$emit("switchViewer","")}}},rt=at,lt=(0,c.Z)(rt,ot,st,!1,null,"a1edaaea",null),ut=lt.exports,gt=function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{id:"canvas-FTA-station"}},[e("canvas",{attrs:{id:"sign-canvas-FTA-station"}}),e("div",{attrs:{id:"sign-component"}},[e("keep-alive",[e(this.signStyle,{ref:"svg",tag:"component",staticClass:"sign",attrs:{id:"svg-sign-FTA-station"}})],1)],1),e("div",{staticClass:"data"},[e("p",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v(t._s(this.signInfo||"NO"))])])])])},ct=[],dt=(n(7658),n.p+"img/FTA-Station.2765360b.svg");window.componentsConfig={"FTA-station":"../../assets/signs/FTA-Station.svg"};var mt={name:"StationSignFTA",components:{FTAStation:dt},data(){return{signStyle:"FTA-station",lightStyle:"fluore",output:{outputWidth:600,outputHeight:200},signInfo:{signConfig:{stationNameItalic:!1,simplifySign:!1},layoutInfo:{backgroundColor:"#FFFFFF",textColor:"#000000",stationNameColor:"#FFFFFF"},thisStation:{nameMain:"主城湾",nameSub:"Spawn Bay"},logoInfo:{enableLogo:!1,logoStyle:""},lineInfo:[{name:"Waterside Line · 浦蓝线",nameAbbr:"WS",color:"#55CCFF",stationNumber:"01"}]}}},updated(){this.UpdateSignData()},mounted(){this.UpdateSignData(),this.convertToCanvas()},methods:{UpdateData(t,e,n){this.lightStyle=e,this.signInfo=t,this.output=n},UpdateSignStyle(t){this.signStyle=t},UpdateSignData(){let t=this.$refs.svg.getElementById("station-name");t.setAttribute("fill",this.signInfo.layoutInfo.textColor),t.setAttribute("font-style",this.signInfo.signConfig.stationNameItalic?"italic":"normal"),t.childNodes[0].innerHTML=this.signInfo.thisStation.nameMain,t=this.$refs.svg.getElementById("station-name-sub"),t.setAttribute("fill",this.signInfo.layoutInfo.textColor),t.setAttribute("font-style",this.signInfo.signConfig.stationNameItalic?"italic":"normal"),t.childNodes[0].innerHTML=this.signInfo.thisStation.nameSub,this.colorBeltCheck(),t=this.$refs.svg.getElementById("station-number"),t.setAttribute("fill",this.signInfo.layoutInfo.textColor),t.setAttribute("visibility",this.signInfo.signConfig.simplifySign?"hidden":"visible");let e=this.signInfo.lineInfo.length-1,n="",i=[];for(let o=0;o<=e;o++)n=this.signInfo.lineInfo[o].nameAbbr+"-"+this.signInfo.lineInfo[o].stationNumber,i.push(n);t.childNodes[0].innerHTML=i.join(" | "),this.signInfo.logoInfo.enableLogo||(this.signInfo.logoInfo.logoStyle=""),this.$refs.svg.getElementById("FTA-Logo-SUR").setAttribute("visibility","FTA-Logo-SUR"===this.signInfo.logoInfo.logoStyle?"visible":"hidden"),this.$refs.svg.getElementById("FTA-Logo-SUR-Reversed").setAttribute("visibility","FTA-Logo-SUR-Reversed"===this.signInfo.logoInfo.logoStyle?"visible":"hidden"),this.$refs.svg.getElementById("FTA-Logo-PUAT").setAttribute("visibility","FTA-Logo-PUAT"===this.signInfo.logoInfo.logoStyle?"visible":"hidden"),this.$refs.svg.getElementById("FTA-Logo-PUAT-Reversed").setAttribute("visibility","FTA-Logo-PUAT-Reversed"===this.signInfo.logoInfo.logoStyle?"visible":"hidden"),this.$refs.svg.getElementById("FTA-Logo-NLRR").setAttribute("visibility","FTA-Logo-NLRR"===this.signInfo.logoInfo.logoStyle?"visible":"hidden"),this.$refs.svg.getElementById("FTA-Logo-NLRR-Reversed").setAttribute("visibility","FTA-Logo-NLRR-Reversed"===this.signInfo.logoInfo.logoStyle?"visible":"hidden"),this.$refs.svg.getElementById("FTA-Logo-MLR").setAttribute("visibility","FTA-Logo-MLR"===this.signInfo.logoInfo.logoStyle?"visible":"hidden"),this.$refs.svg.getElementById("FTA-Logo-MLR-Reversed").setAttribute("visibility","FTA-Logo-MLR-Reversed"===this.signInfo.logoInfo.logoStyle?"visible":"hidden"),""===this.signInfo.logoInfo.logoStyle?this.$refs.svg.getElementById("FTA-Logo-SUR").setAttribute("transform","translate("+(this.output.outputWidth-100).toString()+","+(this.output.outputHeight-95).toString()+")"):this.$refs.svg.getElementById(this.signInfo.logoInfo.logoStyle).setAttribute("transform","translate("+(this.output.outputWidth-100).toString()+","+(this.output.outputHeight-95).toString()+")"),this.convertToCanvas()},RequireRearrange(t,e,n){let i;this.lightStyle=t,this.signInfo=e,this.output=n,this.UpdateSignData(),i=this.$refs.svg.getElementById("background"),i.setAttribute("width",this.output.outputWidth),i.setAttribute("height",this.output.outputHeight),i.setAttribute("fill",this.signInfo.layoutInfo.backgroundColor);let o=this.signInfo.lineInfo.length,s=0,a=[];for(let r=1;r<=o;r++){let t;i=this.$refs.svg.getElementById("color-belt-abbr-"+r);let e=this.$refs.svg.getElementById("color-belt-abbr-"+r).getBBox().width,n=s+20+9;i.setAttribute("transform","translate("+n.toString()+", "+(this.output.outputHeight-16).toString()+")"),i.setAttribute("fill",this.signInfo.layoutInfo.textColor),i.setAttribute("visibility",this.signInfo.signConfig.simplifySign?"hidden":"visible"),i.childNodes[0].innerHTML=this.signInfo.lineInfo[r-1].nameAbbr,i=this.$refs.svg.getElementById("color-belt-abbr-frame-"+r),i.setAttribute("width",e+18),i.setAttribute("x",s+20),i.setAttribute("y",this.output.outputHeight-30),i.setAttribute("fill",this.signInfo.layoutInfo.backgroundColor),i.setAttribute("visibility",this.signInfo.signConfig.simplifySign?"hidden":"visible"),i=this.$refs.svg.getElementById("color-belt-name-"+r);let l=this.$refs.svg.getElementById("color-belt-name-"+r).getBBox().width,u=e+18+20+20+s;if(i.setAttribute("transform","translate("+u.toString()+", "+(this.output.outputHeight-16).toString()+")"),i.childNodes[0].innerHTML=this.signInfo.lineInfo[r-1].name,i.setAttribute("visibility",this.signInfo.signConfig.simplifySign?"hidden":"visible"),t=l+20+20+e+18+20,i=this.$refs.svg.getElementById("color-belt-"+r),i.setAttribute("fill",this.signInfo.lineInfo[r-1].color),i.setAttribute("x",s),i.setAttribute("y",this.output.outputHeight-40),i.setAttribute("width",t),s+=t,this.signInfo.signConfig.simplifySign){let t=this.output.outputWidth/o;i.setAttribute("x",t*(r-1)),i.setAttribute("width",t)}else if(a.push(t),1===a.length)i.setAttribute("width",this.output.outputWidth);else{let t=0;for(let n=0;n<a.length-1;n++)t+=a.at(n);let e=this.output.outputWidth-t;i.setAttribute("width",e)}}this.convertToCanvas()},colorBeltCheck(){let t=this.signInfo.lineInfo.length;for(let e=1;e<=t;e++){let t=!!this.$refs.svg.getElementById("color-belt-"+e);if(!t){let t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("id","color-belt-"+e),t.setAttribute("x","0"),t.setAttribute("y","160"),t.setAttribute("height","40"),t.setAttribute("fill",this.signInfo.lineInfo[e-1].color);let n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("id","color-belt-abbr-frame-"+e),n.setAttribute("fill",this.signInfo.layoutInfo.backgroundColor),n.setAttribute("width","36"),n.setAttribute("height","19"),n.setAttribute("rx","9.5"),n.setAttribute("ry","9.5");let i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("id","color-belt-abbr-"+e),i.setAttribute("fill",this.signInfo.layoutInfo.textColor),i.setAttribute("font-size","12"),i.setAttribute("font-family",".PingFangSC-Regular, .PingFang SC"),i.setAttribute("font-weight","700");let o=document.createElementNS("http://www.w3.org/2000/svg","tspan");o.setAttribute("x","0"),o.setAttribute("y","0"),o.innerHTML=this.signInfo.lineInfo[e-1].nameAbbr,i.appendChild(o);let s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("id","color-belt-name-"+e),s.setAttribute("fill",this.signInfo.layoutInfo.backgroundColor),s.setAttribute("font-size","14"),s.setAttribute("font-family",".PingFangSC-Regular, .PingFang SC"),s.setAttribute("font-weight","600");let a=document.createElementNS("http://www.w3.org/2000/svg","tspan");a.setAttribute("x","0"),a.setAttribute("y","0"),a.innerHTML=this.signInfo.lineInfo[e-1].name,s.appendChild(a);let r=this.$refs.svg.getElementById("station-name");this.$refs.svg.getElementById("svg-inner-FTAS").insertBefore(t,r),this.$refs.svg.getElementById("svg-inner-FTAS").insertBefore(n,r),this.$refs.svg.getElementById("svg-inner-FTAS").insertBefore(i,r),this.$refs.svg.getElementById("svg-inner-FTAS").insertBefore(s,r)}}},removeBelt(t,e,n,i){this.lightStyle=t,this.signInfo=e,this.output=n,i+=1;let o=!!this.$refs.svg.getElementById("color-belt-"+i);if(o){let t=this.$refs.svg.getElementById("color-belt-"+i);t.remove();let e=this.$refs.svg.getElementById("color-belt-abbr-frame-"+i);e.remove();let n=this.$refs.svg.getElementById("color-belt-abbr-"+i);n.remove();let o=this.$refs.svg.getElementById("color-belt-name-"+i);o.remove()}this.RequireRearrange(t,e,n)},convertToCanvas(){let t=this.newSvgConstructor(),e=this.output.outputWidth,n=this.output.outputHeight,i=t.cloneNode(!0),o=i.outerHTML,s=new Blob([o],{type:"image/svg+xml;charset=utf-8"}),a=window.URL||window.webkitURL||window,r=a.createObjectURL(s),l=new Image;l.onload=()=>{let t=document.getElementById("sign-canvas-FTA-station");t.width=e,t.height=n;let i=t.getContext("2d");i.drawImage(l,0,0,e,n)},l.src=r},newSvgConstructor(){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("version","1.1"),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("id","svg-sign-FTA-station"),t.setAttribute("class","sign"),t.setAttribute("viewBox","0 0 "+this.output.outputWidth.toString()+" "+this.output.outputHeight.toString()),t.setAttribute("width",this.output.outputWidth.toString()),t.setAttribute("height",this.output.outputHeight.toString());let e=document.getElementById("svg-inner-FTAS");return t.appendChild(e.cloneNode(!0)),t}}},ht=mt,ft=(0,c.Z)(ht,gt,ct,!1,null,"25a99c62",null),pt=ft.exports,vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"form",attrs:{id:"editor"}},[e("div",{staticClass:"form",attrs:{id:"editor"}},[e("div",{staticClass:"row"},[e("div",[t._m(0),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站牌样式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.signStyle,expression:"signStyle"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.signStyle=e.target.multiple?n:n[0]},t.sendSign]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),e("option",{attrs:{value:"test-sign"}},[t._v("测试用")]),e("option",{attrs:{value:"kitajuku-dentetsu"}},[t._v("北宿电铁")]),e("option",{attrs:{value:"FTA-station"}},[t._v("FTA 车站牌")]),e("option",{attrs:{value:"FTA-guide"}},[t._v("FTA 导视牌")])])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("灯光效果")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.lightStyle,expression:"lightStyle"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.lightStyle=e.target.multiple?n:n[0]},t.sendData]}},[e("option",{attrs:{value:"none"}},[t._v("无")]),e("option",{attrs:{value:"fluore"}},[t._v("荧光灯")]),e("option",{attrs:{value:"led"}},[t._v("LED")])])]),e("div",{staticClass:"form-min-row"},[e("button",{staticClass:"button-alert",on:{click:t.requestRearrange}},[t._v("刷新数据")]),e("button",{staticClass:"button-danger",on:{click:t.resetData}},[t._v("重置数据")])])]),e("div",[t._m(1),e("div",{staticClass:"form-min-row"},[e("p",[t._v("宽度")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.output.outputWidth,expression:"output.outputWidth"}],attrs:{placeholder:"600",min:"0",type:"number",value:"600"},domProps:{value:t.output.outputWidth},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.output,"outputWidth",e.target.value)}}}),t._v(" px")])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("高度")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.output.outputHeight,expression:"output.outputHeight"}],attrs:{placeholder:"200",min:"0",type:"number",value:"200"},domProps:{value:t.output.outputHeight},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.output,"outputHeight",e.target.value)}}}),t._v(" px")])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("字体颜色")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.layoutInfo.textColor,expression:"signInfo.layoutInfo.textColor"}],attrs:{type:"color"},domProps:{value:t.signInfo.layoutInfo.textColor},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.layoutInfo,"textColor",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("线路名字体颜色")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.layoutInfo.stationNameColor,expression:"signInfo.layoutInfo.stationNameColor"}],attrs:{type:"color"},domProps:{value:t.signInfo.layoutInfo.stationNameColor},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.layoutInfo,"stationNameColor",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("背景颜色")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.layoutInfo.backgroundColor,expression:"signInfo.layoutInfo.backgroundColor"}],attrs:{type:"color"},domProps:{value:t.signInfo.layoutInfo.backgroundColor},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.layoutInfo,"backgroundColor",e.target.value)}}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站名斜体")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.signConfig.stationNameItalic,expression:"signInfo.signConfig.stationNameItalic"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.signInfo.signConfig.stationNameItalic)?t._i(t.signInfo.signConfig.stationNameItalic,null)>-1:t.signInfo.signConfig.stationNameItalic},on:{change:[function(e){var n=t.signInfo.signConfig.stationNameItalic,i=e.target,o=!!i.checked;if(Array.isArray(n)){var s=null,a=t._i(n,s);i.checked?a<0&&t.$set(t.signInfo.signConfig,"stationNameItalic",n.concat([s])):a>-1&&t.$set(t.signInfo.signConfig,"stationNameItalic",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.signInfo.signConfig,"stationNameItalic",o)},t.requestRearrange]}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("信息精简化")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.signConfig.simplifySign,expression:"signInfo.signConfig.simplifySign"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.signInfo.signConfig.simplifySign)?t._i(t.signInfo.signConfig.simplifySign,null)>-1:t.signInfo.signConfig.simplifySign},on:{change:[function(e){var n=t.signInfo.signConfig.simplifySign,i=e.target,o=!!i.checked;if(Array.isArray(n)){var s=null,a=t._i(n,s);i.checked?a<0&&t.$set(t.signInfo.signConfig,"simplifySign",n.concat([s])):a>-1&&t.$set(t.signInfo.signConfig,"simplifySign",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.signInfo.signConfig,"simplifySign",o)},t.requestRearrange]}})]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("显示Logo")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.logoInfo.enableLogo,expression:"signInfo.logoInfo.enableLogo"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.signInfo.logoInfo.enableLogo)?t._i(t.signInfo.logoInfo.enableLogo,null)>-1:t.signInfo.logoInfo.enableLogo},on:{change:[function(e){var n=t.signInfo.logoInfo.enableLogo,i=e.target,o=!!i.checked;if(Array.isArray(n)){var s=null,a=t._i(n,s);i.checked?a<0&&t.$set(t.signInfo.logoInfo,"enableLogo",n.concat([s])):a>-1&&t.$set(t.signInfo.logoInfo,"enableLogo",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.signInfo.logoInfo,"enableLogo",o)},t.requestRearrange]}})]),t.signInfo.logoInfo.enableLogo?e("div",{staticClass:"form-min-row"},[e("p",[t._v("Logo选项")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.logoInfo.logoStyle,expression:"signInfo.logoInfo.logoStyle"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.signInfo.logoInfo,"logoStyle",e.target.multiple?n:n[0])},t.requestRearrange]}},[e("option",{attrs:{value:"FTA-Logo-SUR"}},[t._v("生存铁路")]),e("option",{attrs:{value:"FTA-Logo-NLRR"}},[t._v("北方大陆铁路")]),e("option",{attrs:{value:"FTA-Logo-MLR"}},[t._v("大都会联贯铁路")]),e("option",{attrs:{value:"FTA-Logo-PUAT"}},[t._v("蒲塘桥都市区域交通")]),e("option",{attrs:{value:"FTA-Logo-SUR-Reversed"}},[t._v("生存铁路-反色")]),e("option",{attrs:{value:"FTA-Logo-PUAT-Reversed"}},[t._v("蒲塘桥都市区域交通-反色")]),e("option",{attrs:{value:"FTA-Logo-NLRR-Reversed"}},[t._v("北方大陆铁路-反色")]),e("option",{attrs:{value:"FTA-Logo-MLR-Reversed"}},[t._v("大都会联贯铁路-反色")])])]):t._e()])]),e("div",{staticClass:"row"},[e("div",[t._m(2),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站名")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.thisStation.nameMain,expression:"signInfo.thisStation.nameMain"}],attrs:{type:"text"},domProps:{value:t.signInfo.thisStation.nameMain},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.thisStation,"nameMain",e.target.value)}}})])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站名 - 第二语言")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.thisStation.nameSub,expression:"signInfo.thisStation.nameSub"}],attrs:{type:"text"},domProps:{value:t.signInfo.thisStation.nameSub},on:{change:t.requestRearrange,input:function(e){e.target.composing||t.$set(t.signInfo.thisStation,"nameSub",e.target.value)}}})])])]),e("div",[t._m(3),t._l(t.signInfo.lineInfo,(function(n){return e("div",{key:n.index,on:{change:t.requestRearrange}},[e("div",{staticClass:"form-min-row"},[e("p",[t._v("线路名")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.name,expression:"line.name"}],attrs:{type:"text"},domProps:{value:n.name},on:{input:function(e){e.target.composing||t.$set(n,"name",e.target.value)}}})])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("线路缩写")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.nameAbbr,expression:"line.nameAbbr"}],attrs:{type:"text"},domProps:{value:n.nameAbbr},on:{input:function(e){e.target.composing||t.$set(n,"nameAbbr",e.target.value)}}})])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("线路颜色")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.color,expression:"line.color"}],attrs:{type:"color"},domProps:{value:n.color},on:{input:function(e){e.target.composing||t.$set(n,"color",e.target.value)}}})])]),e("div",{staticClass:"form-min-row line-info-form-end"},[e("p",[t._v("线路于本站的序号")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.stationNumber,expression:"line.stationNumber"}],attrs:{type:"number"},domProps:{value:n.stationNumber},on:{input:function(e){e.target.composing||t.$set(n,"stationNumber",e.target.value)}}})])])])})),t._m(4),e("div",{staticClass:"form-min-row"},[e("p",[t._v("线路操作")]),e("input",{staticClass:"button",attrs:{value:"  新增线路  ",type:"button"},on:{click:t.addLine}}),e("input",{staticClass:"button",attrs:{value:"  删除线路  ",type:"button"},on:{click:t.delLine}})])],2)])])])},Ct=[function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("palette")]),t._v("FesGen编辑器设置")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("tune")]),t._v("FTA 车站牌: 全局设置")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("info")]),t._v("本站信息")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("info")]),t._v("线路信息")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-min-row"},[e("p",{staticClass:"hint"},[t._v('"删除线路"操作将删除最后一个线路')])])}],yt={name:"StationSignFTAEditor",data(){return{signStyle:"FTA-station",lightStyle:"fluore",output:{outputWidth:600,outputHeight:200},signInfo:{signConfig:{stationNameItalic:!1,simplifySign:!1},layoutInfo:{backgroundColor:"#FFFFFF",textColor:"#000000",stationNameColor:"#FFFFFF"},thisStation:{nameMain:"主城湾",nameSub:"Spawn Bay"},logoInfo:{enableLogo:!1,logoStyle:""},lineInfo:[{name:"Waterside Line · 浦蓝线",nameAbbr:"WS",color:"#55CCFF",stationNumber:"01"}]}}},mounted(){this.reloadCache(),this.$emit("someChanged",this.lightStyle,this.signInfo,this.output),this.$emit("contentNeedRearrange",this.lightStyle,this.signInfo,this.output),this.dataToJson()},methods:{sendData(){this.dataToJson(),this.$emit("someChanged",this.lightStyle,this.signInfo,this.output)},sendSign(){this.dataToJson(),this.$emit("signChanged",this.signStyle,this.lightStyle,this.signInfo,this.output)},requestRearrange(){this.dataToJson(),this.$emit("contentNeedRearrange",this.lightStyle,this.signInfo,this.output)},dataToJson(){let t=JSON.stringify(this.$data);sessionStorage.setItem("instanceConfigFTAStation",t)},reloadCache(){if(null!==sessionStorage.getItem("instanceConfigFTAStation")){let t=JSON.parse(sessionStorage.getItem("instanceConfigFTAStation"));this.signInfo=t.signInfo,this.lightStyle=t.lightStyle,this.output=t.output,this.$emit("contentNeedRearrange",this.lightStyle,this.signInfo,this.output)}},resetData(){this.signInfo={signConfig:{stationNameItalic:!1,simplifySign:!1},layoutInfo:{backgroundColor:"#FFFFFF",textColor:"#000000",stationNameColor:"#FFFFFF"},thisStation:{nameMain:"主城湾",nameSub:"Spawn Bay"},logoInfo:{enableLogo:!1,logoStyle:""},lineInfo:[{name:"Waterside Line · 浦蓝线",nameAbbr:"WS",color:"#55CCFF",stationNumber:"01"}]},this.signStyle="FTA-station",this.lightStyle="fluore",this.output={outputWidth:600,outputHeight:200},this.dataToJson(),this.$emit("contentNeedRearrange",this.lightStyle,this.signInfo,this.output)},addLine(){let t=Math.floor(100*Math.random()),e="#"+Math.floor(16777215*Math.random()).toString(16),n=String.fromCharCode(65+Math.floor(26*Math.random()));this.signInfo.lineInfo.push({name:n,nameAbbr:n,color:e,stationNumber:t}),this.dataToJson(),this.$emit("contentNeedRearrange",this.lightStyle,this.signInfo,this.output)},delLine(){this.signInfo.lineInfo.pop(),this.dataToJson(),this.$emit("beltDeleted",this.lightStyle,this.signInfo,this.output,this.signInfo.lineInfo.length)}}},bt=yt,It=(0,c.Z)(bt,vt,Ct,!1,null,"8f481714",null),St=It.exports,wt=function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{id:"canvas-FTA-guide"}},[e("canvas",{attrs:{id:"sign-canvas-FTA-station"}}),e("div",{attrs:{id:"sign-component"}},[e("keep-alive",[e(this.signStyle,{ref:"svg",tag:"component",staticClass:"sign",attrs:{id:"svg-sign-FTA-guide"}})],1)],1),e("div",{staticClass:"data"},[e("p",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v(t._s(this.signInfo||"NO"))])])])])},At=[],_t=n.p+"img/FTA-guide.d2eb87ec.svg";window.componentsConfig={"FTA-guide":"../../assets/signs/FTA-guide.svg"};var Nt={name:"guideSignFTA",components:{FTAGuide:_t},data(){return{focusComponent:{focusLayer:-1,focusComponent:-1},uniqueIdTable:{layerIds:[0],componentIds:[0]},signStyle:"FTA-guide",lightStyle:"fluore",output:{outputWidth:600,outputHeight:200},signInfo:{beltColor:"#000000",generalBaseColor:"#FFFFFF",layers:[{name:"Layer1",id:0,height:100,baseColor:"#FFFFFF",components:[{id:0,name:"init",type:"text",width:100,center:!1,backgroundColor:"#FFFFFF",components:[{id:0,text:"Accessible Elevator",textColor:"#000000",iconLeft:"ARROW_LEFT",iconLeftColor:"#000000",iconRight:"ACCESSIBLE_ELEVATOR",iconRightColor:"#000000",large:!1,bold:!1,italic:!1}]}]}]}}},updated(){this.UpdateSignData()},mounted(){this.UpdateSignData(),this.convertToCanvas()},methods:{UpdateData(t,e,n){this.lightStyle=e,this.signInfo=t,this.output=n,this.UpdateSignData()},UpdateSignStyle(t){this.signStyle=t},UpdateSignData(){console.log("guideSignFTA"),this.$refs.svg.firstChild.remove();let t=document.createElementNS("http://www.w3.org/2000/svg","g");t.setAttribute("id","svg-inner-FTAG");let e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("width",this.output.outputWidth.toString()),e.setAttribute("height",this.output.outputHeight.toString()),e.setAttribute("fill",this.signInfo.generalBaseColor),e.setAttribute("id","background"),t.appendChild(e);let n=document.createElementNS("http://www.w3.org/2000/svg","rect");if(n.setAttribute("x","0"),n.setAttribute("y",(this.output.outputHeight-20).toString()),n.setAttribute("width",this.output.outputWidth.toString()),n.setAttribute("height","20"),n.setAttribute("fill",this.signInfo.beltColor),n.setAttribute("id","colorBelt"),t.appendChild(n),this.signInfo.layers){let e=this.signInfo.layers.length,n=0;for(let i=1;i<=e;i++){let e=this.signInfo.layers[i-1],o=e.height,s=e.baseColor,a=e.components,r=document.createElementNS("http://www.w3.org/2000/svg","g");r.setAttribute("id","layer-"+i.toString()),r.setAttribute("transform","translate(0, "+n.toString()+")");let l=document.createElementNS("http://www.w3.org/2000/svg","rect");l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("width",this.output.outputWidth.toString()),l.setAttribute("height",o.toString()),l.setAttribute("fill",s),l.setAttribute("id","layerBackground"),r.appendChild(l);let u=a.length,g=0;for(let t=1;t<=u;t++){let n=a[t-1],i=n.type,s=n.width,l=n.backgroundColor,u=n.components,c=document.createElementNS("http://www.w3.org/2000/svg","g");c.setAttribute("id","component-"+t.toString()),c.setAttribute("transform","translate("+g.toString()+", 0)");let d=document.createElementNS("http://www.w3.org/2000/svg","rect");if(d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("width",s.toString()),d.setAttribute("height",o.toString()),d.setAttribute("fill",l),d.setAttribute("id","componentBackground-"+t.toString()),c.appendChild(d),"span"!==i){let t=u.length,e=n.center,i=0;for(let n=1;n<=t;n++){let t=0,o=u[n-1],a=o.text,r=o.textColor,l=o.iconLeft,g=o.iconLeftColor,d=o.iconRight,m=o.iconRightColor,h=o.bold,f=o.italic,p=o.right,v=document.createElementNS("http://www.w3.org/2000/svg","g");if(v.setAttribute("id","internal-component-"+n.toString()),v.setAttribute("transform","translate(0, "+(10*(n-1)).toString()+")"),"NONE"!==l){let e=document.createElementNS("http://www.w3.org/2000/svg","use");e.setAttribute("href","#"+l),e.setAttribute("xlink:href","#"+l),e.setAttribute("x",(t+15).toString()),e.setAttribute("y",(i+15).toString()),e.setAttribute("fill",g),e.setAttribute("stroke",g),v.appendChild(e),t+=50}else t+=15;if(a.includes("|")){let o=a.split("|"),l=document.createElementNS("http://www.w3.org/2000/svg","text");e?(l.setAttribute("x",(s/2-15).toString()),l.setAttribute("y",(i+27).toString()),l.setAttribute("text-anchor","middle")):p?(l.setAttribute("x",(s-100).toString()),l.setAttribute("y",(i+27).toString()),l.setAttribute("text-anchor","end")):(l.setAttribute("x","0"),l.setAttribute("y",(i+27).toString()),l.setAttribute("text-anchor","start")),f?l.setAttribute("font-style","italic"):l.setAttribute("font-style","normal"),h?l.setAttribute("font-weight","bold"):l.setAttribute("font-weight","normal"),l.setAttribute("fill",r),l.setAttribute("id","internal-component-text-"+n.toString()),l.setAttribute("font-size","22"),l.setAttribute("font-family",".Source Sans Variable, .Source Sans Pro"),l.setAttribute("transform","translate("+t.toString()+", 0)"),l.textContent=o[0],v.appendChild(l);let u=document.createElementNS("http://www.w3.org/2000/svg","text");e?(u.setAttribute("x",(s/2-15).toString()),u.setAttribute("y",(i+45).toString()),u.setAttribute("text-anchor","middle")):p?(u.setAttribute("x",(s-100).toString()),u.setAttribute("y",(i+45).toString()),u.setAttribute("text-anchor","end")):(u.setAttribute("x","0"),u.setAttribute("y",(i+45).toString()),u.setAttribute("text-anchor","start")),f?u.setAttribute("font-style","italic"):u.setAttribute("font-style","normal"),h?u.setAttribute("font-weight","bold"):u.setAttribute("font-weight","normal"),u.setAttribute("fill",r),u.setAttribute("id","internal-component-text-"+n.toString()),u.setAttribute("font-size","15"),u.setAttribute("font-family",".Source Sans Variable, .Source Sans Pro"),u.setAttribute("transform","translate("+t.toString()+", 0)"),u.textContent=o[1],v.appendChild(u)}else if(a.includes("｜")){let o=a.split("｜"),l=document.createElementNS("http://www.w3.org/2000/svg","text");e?(l.setAttribute("x",(s/2-15).toString()),l.setAttribute("y",(i+27).toString()),l.setAttribute("text-anchor","middle")):p?(l.setAttribute("x",(s-100).toString()),l.setAttribute("y",(i+27).toString()),l.setAttribute("text-anchor","end")):(l.setAttribute("x","0"),l.setAttribute("y",(i+27).toString()),l.setAttribute("text-anchor","start")),f?l.setAttribute("font-style","italic"):l.setAttribute("font-style","normal"),h?l.setAttribute("font-weight","bold"):l.setAttribute("font-weight","normal"),l.setAttribute("fill",r),l.setAttribute("id","internal-component-text-"+n.toString()),l.setAttribute("font-size","22"),l.setAttribute("font-family",".Source Sans Variable, .Source Sans Pro"),l.setAttribute("transform","translate("+t.toString()+", 0)"),l.textContent=o[0],v.appendChild(l);let u=document.createElementNS("http://www.w3.org/2000/svg","text");e?(u.setAttribute("x",(s/2-15).toString()),u.setAttribute("y",(i+45).toString()),u.setAttribute("text-anchor","middle")):p?(u.setAttribute("x",(s-100).toString()),u.setAttribute("y",(i+45).toString()),u.setAttribute("text-anchor","end")):(u.setAttribute("x","0"),u.setAttribute("y",(i+45).toString()),u.setAttribute("text-anchor","start")),f?u.setAttribute("font-style","italic"):u.setAttribute("font-style","normal"),h?u.setAttribute("font-weight","bold"):u.setAttribute("font-weight","normal"),u.setAttribute("fill",r),u.setAttribute("id","internal-component-text-"+n.toString()),u.setAttribute("font-size","15"),u.setAttribute("font-family",".Source Sans Variable, .Source Sans Pro"),u.setAttribute("transform","translate("+t.toString()+", 0)"),u.textContent=o[1],v.appendChild(u)}else{let o=document.createElementNS("http://www.w3.org/2000/svg","text");e?(o.setAttribute("x",(s/2-15).toString()),o.setAttribute("y",(i+40).toString()),o.setAttribute("text-anchor","middle")):p?(o.setAttribute("x",(s-100).toString()),o.setAttribute("y",(i+40).toString()),o.setAttribute("text-anchor","end")):(o.setAttribute("x","0"),o.setAttribute("y",(i+40).toString()),o.setAttribute("text-anchor","start")),f?o.setAttribute("font-style","italic"):o.setAttribute("font-style","normal"),h?o.setAttribute("font-weight","bold"):o.setAttribute("font-weight","normal"),o.setAttribute("fill",r),o.setAttribute("id","internal-component-text-"+n.toString()),o.setAttribute("font-size","30"),o.setAttribute("font-family",".Source Sans Variable, .Source Sans Pro"),o.setAttribute("transform","translate("+t.toString()+", 0)"),o.textContent=a,v.appendChild(o)}if("NONE"!==d){let e=document.createElementNS("http://www.w3.org/2000/svg","use");e.setAttribute("href","#"+d),e.setAttribute("xlink:href","#"+d),e.setAttribute("x",(s-40).toString()),e.setAttribute("y",(i+15).toString()),e.setAttribute("fill",m),e.setAttribute("stroke",m),v.appendChild(e),t+=50}else t+=15;i+=36,c.appendChild(v)}}else{let t=u.length,i=n.center;for(let n=1;n<=t;n++){let t=u[n-1],a=t.showLogo,r=t.showSpanLine,l=t.logoType,g=t.color,d=document.createElementNS("http://www.w3.org/2000/svg","g");if(d.setAttribute("id","internal-component-"+n.toString()),d.setAttribute("transform","translate(0, "+(10*(n-1)).toString()+")"),r){let t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("x","0"),t.setAttribute("y","0"),t.setAttribute("width","2"),t.setAttribute("height",e.height.toString()),t.setAttribute("fill",g),d.appendChild(t);let n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("x",(s-2).toString()),n.setAttribute("y","0"),n.setAttribute("width","2"),n.setAttribute("height",e.height.toString()),n.setAttribute("fill",g),d.appendChild(n)}if(i){if(a){let t=document.createElementNS("http://www.w3.org/2000/svg","use");t.setAttribute("href","#"+l),t.setAttribute("xlink:href","#"+l),t.setAttribute("x",(s/2).toString()),t.setAttribute("y",(o/2-25).toString()),d.appendChild(t)}}else{let t=document.createElementNS("http://www.w3.org/2000/svg","use");t.setAttribute("href","#"+l),t.setAttribute("xlink:href","#"+l),t.setAttribute("x",15..toString()),t.setAttribute("y",15..toString()),d.appendChild(t)}c.appendChild(d)}}r.appendChild(c),g=1*s+1*g,console.log(g)}t.appendChild(r),n+=o,console.log(t)}}let i=this.$refs.svg.getElementById("reserved-icons");this.$refs.svg.insertBefore(t,i),this.convertToCanvas()},convertToCanvas(){let t=this.newSvgConstructor(),e=this.output.outputWidth,n=this.output.outputHeight,i=t.cloneNode(!0),o=i.outerHTML,s=new Blob([o],{type:"image/svg+xml;charset=utf-8"}),a=window.URL||window.webkitURL||window,r=a.createObjectURL(s),l=new Image;l.onload=()=>{let t=document.getElementById("sign-canvas-FTA-station");t.width=e,t.height=n;let i=t.getContext("2d");i.drawImage(l,0,0,e,n)},l.src=r},newSvgConstructor(){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("version","1.1"),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.setAttribute("id","svg-sign-FTA-guide"),t.setAttribute("class","sign"),t.setAttribute("viewBox","0 0 "+this.output.outputWidth.toString()+" "+this.output.outputHeight.toString()),t.setAttribute("width",this.output.outputWidth.toString()),t.setAttribute("height",this.output.outputHeight.toString());let e=document.getElementById("svg-inner-FTAG"),n=document.getElementById("reserved-icons");return t.appendChild(e.cloneNode(!0)),t.appendChild(n.cloneNode(!0)),console.log(t),t}}},Tt=Nt,xt=(0,c.Z)(Tt,wt,At,!1,null,"ff375806",null),Ft=xt.exports,Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"form",attrs:{id:"editor"}},[e("div",{staticClass:"form",attrs:{id:"editor"}},[e("div",{staticClass:"row"},[e("div",[t._m(0),e("div",{staticClass:"form-min-row"},[e("p",[t._v("站牌样式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.signStyle,expression:"signStyle"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.signStyle=e.target.multiple?n:n[0]},t.sendSign]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),e("option",{attrs:{value:"test-sign"}},[t._v("测试用")]),e("option",{attrs:{value:"kitajuku-dentetsu"}},[t._v("北宿电铁")]),e("option",{attrs:{value:"FTA-station"}},[t._v("FTA 车站牌")]),e("option",{attrs:{value:"FTA-guide"}},[t._v("FTA 导视牌")])])]),e("div",{staticClass:"form-min-row"},[e("button",{staticClass:"button-alert",on:{click:t.contentChange}},[t._v("刷新数据")]),e("button",{staticClass:"button-danger",on:{click:t.resetData}},[t._v("重置数据")])])]),e("div",[t._m(1),e("div",{staticClass:"form-min-row"},[e("p",[t._v("宽度")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.output.outputWidth,expression:"output.outputWidth"}],attrs:{placeholder:"600",min:"0",type:"number",value:"600"},domProps:{value:t.output.outputWidth},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(t.output,"outputWidth",e.target.value)}}}),t._v(" px")])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("高度")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.output.outputHeight,expression:"output.outputHeight"}],attrs:{placeholder:"200",min:"0",type:"number",value:"200"},domProps:{value:t.output.outputHeight},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(t.output,"outputHeight",e.target.value)}}}),t._v(" px")])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("色带颜色")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.beltColor,expression:"signInfo.beltColor"}],attrs:{type:"color"},domProps:{value:t.signInfo.beltColor},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(t.signInfo,"beltColor",e.target.value)}}})])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("基础颜色")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.generalBaseColor,expression:"signInfo.generalBaseColor"}],attrs:{type:"color"},domProps:{value:t.signInfo.generalBaseColor},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(t.signInfo,"generalBaseColor",e.target.value)}}})])])])]),e("div",{staticClass:"row"},[e("div",[t._m(2),-1===this.focusComponent.focusLayer?e("div",{staticClass:"form-min-row"},[e("p",{staticClass:"hint"},[t._v("您未选择信息层")])]):t._e(),-1!==this.focusComponent.focusLayer?e("div",{staticClass:"form-min-row"},[e("p",[t._v("信息层名称")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.layers[t.focusComponent.focusLayer].name,expression:"signInfo.layers[focusComponent.focusLayer].name"}],attrs:{type:"text"},domProps:{value:t.signInfo.layers[t.focusComponent.focusLayer].name},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(t.signInfo.layers[t.focusComponent.focusLayer],"name",e.target.value)}}})])]):t._e(),-1!==this.focusComponent.focusLayer?e("div",{staticClass:"form-min-row"},[e("p",[t._v("信息层背景色")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.layers[t.focusComponent.focusLayer].baseColor,expression:"signInfo.layers[focusComponent.focusLayer].baseColor"}],attrs:{type:"color"},domProps:{value:t.signInfo.layers[t.focusComponent.focusLayer].baseColor},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(t.signInfo.layers[t.focusComponent.focusLayer],"baseColor",e.target.value)}}})])]):t._e(),-1!==this.focusComponent.focusLayer?e("div",{staticClass:"form-min-row"},[e("p",[t._v("信息层高度")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.layers[t.focusComponent.focusLayer].height,expression:"signInfo.layers[focusComponent.focusLayer].height"}],attrs:{type:"number",min:"0",value:"100"},domProps:{value:t.signInfo.layers[t.focusComponent.focusLayer].height},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(t.signInfo.layers[t.focusComponent.focusLayer],"height",e.target.value)}}})])]):t._e(),e("div",{staticClass:"form-min-row"},[e("button",{staticClass:"button",on:{click:t.addLayer}},[t._v("新建信息层")]),e("button",{staticClass:"button",on:{click:t.deleteLayer}},[t._v("删除信息层")])])]),e("div",[e("draggable",{model:{value:t.signInfo.layers,callback:function(e){t.$set(t.signInfo,"layers",e)},expression:"signInfo.layers"}},t._l(t.signInfo.layers,(function(n,i){return e("div",{key:n.id,staticClass:"drag-sorter",on:{click:function(e){return t.selectLayer(i)}}},[t._v(t._s(n.name)+" "),e("span",{staticClass:"material-symbols-outlined sorter-icon"},[t._v("menu")])])})),0)],1)]),e("div",{staticClass:"row"},[e("div",[t._m(3),-1===this.focusComponent.focusComponent?e("div",{staticClass:"form-min-row"},[e("p",{staticClass:"hint"},[t._v("您未选择组件")])]):t._e(),-1!==this.focusComponent.focusComponent?e("div",{staticClass:"form-min-row"},[e("p",[t._v("组件名称")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].name,expression:"signInfo.layers[focusComponent.focusLayer].components[focusComponent.focusComponent].name"}],attrs:{type:"text"},domProps:{value:t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].name},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent],"name",e.target.value)}}})])]):t._e(),-1!==this.focusComponent.focusComponent?e("div",{staticClass:"form-min-row"},[e("p",[t._v("组件背景色")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].backgroundColor,expression:"signInfo.layers[focusComponent.focusLayer].components[focusComponent.focusComponent].backgroundColor"}],attrs:{type:"color"},domProps:{value:t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].backgroundColor},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent],"backgroundColor",e.target.value)}}})])]):t._e(),-1!==this.focusComponent.focusComponent?e("div",{staticClass:"form-min-row"},[e("p",[t._v("组件宽度")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].width,expression:"signInfo.layers[focusComponent.focusLayer].components[focusComponent.focusComponent].width"}],attrs:{type:"number",min:"0",value:"100"},domProps:{value:t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].width},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent],"width",e.target.value)}}}),t._v(" px")])]):t._e(),-1!==this.focusComponent.focusComponent?e("div",{staticClass:"form-min-row"},[e("p",[t._v("组件类型")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type,expression:"signInfo.layers[focusComponent.focusLayer].components[focusComponent.focusComponent].type"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent],"type",e.target.multiple?n:n[0])},function(e){return t.changeType(t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type,t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].id,t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].name)}]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),e("option",{attrs:{value:"text"}},[t._v("文本")]),e("option",{attrs:{value:"exit"}},[t._v("出口")]),e("option",{attrs:{value:"info"}},[t._v("信息")]),e("option",{attrs:{value:"warn"}},[t._v("警示")]),e("option",{attrs:{value:"span"}},[t._v("间隔")])])]):t._e(),-1!==this.focusComponent.focusComponent?e("div",{staticClass:"form-min-row"},[e("p",[t._v("文本居中显示")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].center,expression:"signInfo.layers[focusComponent.focusLayer].components[focusComponent.focusComponent].center"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].center)?t._i(t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].center,null)>-1:t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].center},on:{change:[function(e){var n=t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].center,i=e.target,o=!!i.checked;if(Array.isArray(n)){var s=null,a=t._i(n,s);i.checked?a<0&&t.$set(t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent],"center",n.concat([s])):a>-1&&t.$set(t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent],"center",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent],"center",o)},t.contentChange]}})])]):t._e(),-1!==this.focusComponent.focusComponent?e("div",{staticClass:"form-min-row"},[e("p",{staticClass:"hint"},[t._v('使用字符"|"可以分割第一第二语言文本')])]):t._e(),-1!==this.focusComponent.focusLayer?e("div",{staticClass:"form-min-row content-info-form-end"},[e("button",{staticClass:"button",on:{click:t.createComponentInLayer}},[t._v("新建层内组件")]),e("button",{staticClass:"button",on:{click:t.deleteComponentInLayer}},[t._v("删除层内组件")])]):t._e(),-1!==this.focusComponent.focusComponent?e("div",t._l(t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].components,(function(n,i){return e("div",{key:n.id},[e("div",{staticClass:"form-min-row"},[e("h2",[t._v("第 "+t._s(i+1)+" 层")])]),"span"!==t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type?e("div",{staticClass:"form-min-row"},[e("p",[t._v("本层文本内容")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.text,expression:"content.text"}],attrs:{type:"text"},domProps:{value:n.text},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(n,"text",e.target.value)}}})])]):t._e(),"span"!==t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type?e("div",{staticClass:"form-min-row"},[e("p",[t._v("本层文本颜色")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.textColor,expression:"content.textColor"}],attrs:{type:"color"},domProps:{value:n.textColor},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(n,"textColor",e.target.value)}}})])]):t._e(),"span"!==t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type?e("div",{staticClass:"form-min-row"},[e("p",[t._v("本层左侧图标类型")]),e("select",{directives:[{name:"model",rawName:"v-model",value:n.iconLeft,expression:"content.iconLeft"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"iconLeft",e.target.multiple?i:i[0])},t.contentChange]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),e("option",{attrs:{value:"NONE"}},[t._v("无")]),e("option",{attrs:{value:"INFORMATION"}},[t._v("信息咨询台")]),e("option",{attrs:{value:"ACCESSIBLE_ELEVATOR"}},[t._v("垂直电梯")]),e("option",{attrs:{value:"ACCESSIBLE_STAIRS"}},[t._v("有轮椅升降机的楼梯")]),e("option",{attrs:{value:"ACCESSIBLE"}},[t._v("残障友好标志")]),e("option",{attrs:{value:"STAIRS"}},[t._v("楼梯")]),e("option",{attrs:{value:"NOT_AVAILABLE"}},[t._v("不可用")]),e("option",{attrs:{value:"EXIT_WITH_FRAME"}},[t._v("有框出口标识")]),e("option",{attrs:{value:"EXIT_WITHOUT_FRAME"}},[t._v("无框出口标识")]),e("option",{attrs:{value:"COLOR_BLOCK"}},[t._v("色块")]),e("option",{attrs:{value:"ARROW_DOWN"}},[t._v("向下的箭头")]),e("option",{attrs:{value:"ARROW_UP"}},[t._v("向上的箭头")]),e("option",{attrs:{value:"ARROW_LEFT"}},[t._v("向左的箭头")]),e("option",{attrs:{value:"ARROW_RIGHT"}},[t._v("向右的箭头")]),e("option",{attrs:{value:"ARROW_UP_LEFT"}},[t._v("向左上的箭头")]),e("option",{attrs:{value:"ARROW_UP_RIGHT"}},[t._v("向右上的箭头")]),e("option",{attrs:{value:"ARROW_DOWN_LEFT"}},[t._v("向左下的箭头")]),e("option",{attrs:{value:"ARROW_DOWN_RIGHT"}},[t._v("向右下的箭头")])])]):t._e(),"span"!==t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type?e("div",{staticClass:"form-min-row"},[e("p",[t._v("本层左侧图标颜色")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.iconLeftColor,expression:"content.iconLeftColor"}],attrs:{type:"color"},domProps:{value:n.iconLeftColor},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(n,"iconLeftColor",e.target.value)}}})])]):t._e(),"span"!==t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type?e("div",{staticClass:"form-min-row"},[e("p",[t._v("本层右侧图标类型")]),e("select",{directives:[{name:"model",rawName:"v-model",value:n.iconRight,expression:"content.iconRight"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"iconRight",e.target.multiple?i:i[0])},t.contentChange]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),e("option",{attrs:{value:"NONE"}},[t._v("无")]),e("option",{attrs:{value:"INFORMATION"}},[t._v("信息咨询台")]),e("option",{attrs:{value:"ACCESSIBLE_ELEVATOR"}},[t._v("垂直电梯")]),e("option",{attrs:{value:"ACCESSIBLE_STAIRS"}},[t._v("有轮椅升降机的楼梯")]),e("option",{attrs:{value:"ACCESSIBLE"}},[t._v("残障友好标志")]),e("option",{attrs:{value:"STAIRS"}},[t._v("楼梯")]),e("option",{attrs:{value:"COLOR_BLOCK"}},[t._v("色块")]),e("option",{attrs:{value:"NOT_AVAILABLE"}},[t._v("不可用")]),e("option",{attrs:{value:"EXIT_WITH_FRAME"}},[t._v("有框出口标识")]),e("option",{attrs:{value:"EXIT_WITHOUT_FRAME"}},[t._v("无框出口标识")]),e("option",{attrs:{value:"ARROW_DOWN"}},[t._v("向下的箭头")]),e("option",{attrs:{value:"ARROW_UP"}},[t._v("向上的箭头")]),e("option",{attrs:{value:"ARROW_LEFT"}},[t._v("向左的箭头")]),e("option",{attrs:{value:"ARROW_RIGHT"}},[t._v("向右的箭头")]),e("option",{attrs:{value:"ARROW_UP_LEFT"}},[t._v("向左上的箭头")]),e("option",{attrs:{value:"ARROW_UP_RIGHT"}},[t._v("向右上的箭头")]),e("option",{attrs:{value:"ARROW_DOWN_LEFT"}},[t._v("向左下的箭头")]),e("option",{attrs:{value:"ARROW_DOWN_RIGHT"}},[t._v("向右下的箭头")])])]):t._e(),"span"!==t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type?e("div",{staticClass:"form-min-row"},[e("p",[t._v("本层右侧图标颜色")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.iconRightColor,expression:"content.iconRightColor"}],attrs:{type:"color"},domProps:{value:n.iconRightColor},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(n,"iconRightColor",e.target.value)}}})])]):t._e(),"span"===t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type?e("div",{staticClass:"form-min-row"},[e("p",[t._v("空区底色")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.color,expression:"content.color"}],attrs:{type:"color"},domProps:{value:n.color},on:{change:t.contentChange,input:function(e){e.target.composing||t.$set(n,"color",e.target.value)}}})])]):t._e(),"span"===t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type?e("div",{staticClass:"form-min-row"},[e("p",[t._v("显示分隔线")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.showSpanLine,expression:"content.showSpanLine"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.showSpanLine)?t._i(n.showSpanLine,null)>-1:n.showSpanLine},on:{change:[function(e){var i=n.showSpanLine,o=e.target,s=!!o.checked;if(Array.isArray(i)){var a=null,r=t._i(i,a);o.checked?r<0&&t.$set(n,"showSpanLine",i.concat([a])):r>-1&&t.$set(n,"showSpanLine",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(n,"showSpanLine",s)},t.contentChange]}})])]):t._e(),"span"===t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type?e("div",{staticClass:"form-min-row"},[e("p",[t._v("显示LOGO")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.showLogo,expression:"content.showLogo"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.showLogo)?t._i(n.showLogo,null)>-1:n.showLogo},on:{change:[function(e){var i=n.showLogo,o=e.target,s=!!o.checked;if(Array.isArray(i)){var a=null,r=t._i(i,a);o.checked?r<0&&t.$set(n,"showLogo",i.concat([a])):r>-1&&t.$set(n,"showLogo",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(n,"showLogo",s)},t.contentChange]}})])]):t._e(),"span"===t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type?e("div",{staticClass:"form-min-row"},[e("p",[t._v("Logo选项")]),e("select",{directives:[{name:"model",rawName:"v-model",value:n.logoType,expression:"content.logoType"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"logoType",e.target.multiple?i:i[0])},t.contentChange]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),e("option",{attrs:{value:"FTA-Logo-SUR"}},[t._v("生存铁路")]),e("option",{attrs:{value:"FTA-Logo-NLRR"}},[t._v("北方大陆铁路")]),e("option",{attrs:{value:"FTA-Logo-MLR"}},[t._v("大都会联贯铁路")]),e("option",{attrs:{value:"FTA-Logo-PUAT"}},[t._v("蒲塘桥都市区域交通")]),e("option",{attrs:{value:"FTA-Logo-SUR-Reversed"}},[t._v("生存铁路-反色")]),e("option",{attrs:{value:"FTA-Logo-PUAT-Reversed"}},[t._v("蒲塘桥都市区域交通-反色")]),e("option",{attrs:{value:"FTA-Logo-NLRR-Reversed"}},[t._v("北方大陆铁路-反色")]),e("option",{attrs:{value:"FTA-Logo-MLR-Reversed"}},[t._v("大都会联贯铁路-反色")])])]):t._e(),e("div",{staticClass:"form-min-row"},[e("p",[t._v("向右对齐")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.right,expression:"content.right"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.right)?t._i(n.right,null)>-1:n.right},on:{change:[function(e){var i=n.right,o=e.target,s=!!o.checked;if(Array.isArray(i)){var a=null,r=t._i(i,a);o.checked?r<0&&t.$set(n,"right",i.concat([a])):r>-1&&t.$set(n,"right",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(n,"right",s)},t.contentChange]}})])]),e("div",{staticClass:"form-min-row"},[e("p",[t._v("粗体文字")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.bold,expression:"content.bold"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.bold)?t._i(n.bold,null)>-1:n.bold},on:{change:[function(e){var i=n.bold,o=e.target,s=!!o.checked;if(Array.isArray(i)){var a=null,r=t._i(i,a);o.checked?r<0&&t.$set(n,"bold",i.concat([a])):r>-1&&t.$set(n,"bold",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(n,"bold",s)},t.contentChange]}})])]),e("div",{staticClass:"form-min-row content-info-form-end"},[e("p",[t._v("斜体文字")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.italic,expression:"content.italic"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.italic)?t._i(n.italic,null)>-1:n.italic},on:{change:[function(e){var i=n.italic,o=e.target,s=!!o.checked;if(Array.isArray(i)){var a=null,r=t._i(i,a);o.checked?r<0&&t.$set(n,"italic",i.concat([a])):r>-1&&t.$set(n,"italic",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(n,"italic",s)},t.contentChange]}})])])])})),0):t._e(),-1!==this.focusComponent.focusComponent&&"span"!==t.signInfo.layers[t.focusComponent.focusLayer].components[t.focusComponent.focusComponent].type?e("div",{staticClass:"form-min-row"},[e("button",{staticClass:"button",on:{click:t.createContentInComponent}},[t._v("新建组件内层")]),e("button",{staticClass:"button",on:{click:t.deleteContentInComponent}},[t._v("删除组件内层")])]):t._e()]),e("div",[-1!==this.focusComponent.focusLayer?e("draggable",{model:{value:t.signInfo.layers[t.focusComponent.focusLayer].components,callback:function(e){t.$set(t.signInfo.layers[t.focusComponent.focusLayer],"components",e)},expression:"signInfo.layers[focusComponent.focusLayer].components"}},t._l(t.signInfo.layers[t.focusComponent.focusLayer].components,(function(n,i){return e("div",{key:n.id,staticClass:"drag-sorter",on:{click:function(e){return t.selectComponent(i)}}},[t._v(t._s(n.name)+" "),e("span",{staticClass:"material-symbols-outlined sorter-icon"},[t._v("menu")])])})),0):t._e()],1)])])])},Et=[function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("palette")]),t._v("FesGen编辑器设置")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("tune")]),t._v("FTA 导视牌: 全局设置")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("layers")]),t._v("信息层设置")])},function(){var t=this,e=t._self._c;return e("h2",[e("span",{staticClass:"material-symbols-outlined icon-editor"},[t._v("info")]),t._v("组件信息设置")])}],kt=n(9980),Rt=n.n(kt),$t={name:"guideSignFTAEditor",components:{draggable:Rt()},data(){return{focusComponent:{focusLayer:-1,focusComponent:-1},uniqueIdTable:{layerIds:[0],componentIds:[0]},signStyle:"FTA-guide",lightStyle:"fluore",output:{outputWidth:600,outputHeight:200},signInfo:{beltColor:"#000000",generalBaseColor:"#FFFFFF",layers:[{name:"Layer1",id:0,height:100,baseColor:"#FFFFFF",components:[{id:0,name:"init",type:"text",width:100,center:!1,backgroundColor:"#FFFFFF",components:[{id:0,text:"Accessible Elevator",textColor:"#000000",iconLeft:"ARROW_LEFT",iconLeftColor:"#000000",iconRight:"ACCESSIBLE_ELEVATOR",iconRightColor:"#000000",right:!1,large:!1,bold:!1,italic:!1}]}]}]}}},mounted(){this.reloadCache(),this.$emit("contentChanged",this.signInfo,this.lightStyle,this.output),this.dataToJson()},methods:{sendSign(){this.dataToJson(),this.$emit("signChanged",this.signStyle,this.lightStyle,this.signInfo,this.output)},contentChange(){this.dataToJson(),this.$emit("contentChanged",this.signInfo,this.lightStyle,this.output)},dataToJson(){let t=JSON.stringify(this.$data);sessionStorage.setItem("instanceConfigFTAGuide",t)},reloadCache(){if(null!==sessionStorage.getItem("instanceConfigFTAGuide")){let t=JSON.parse(sessionStorage.getItem("instanceConfigFTAGuide"));this.signInfo=t.signInfo,this.lightStyle=t.lightStyle,this.output=t.output,this.$emit("contentChanged",this.lightStyle,this.signInfo,this.output)}},resetData(){this.signInfo={beltColor:"#000000",generalBaseColor:"#FFFFFF",layers:[{name:"Layer1",id:0,height:100,baseColor:"#FFFFFF",components:[{id:0,name:"init",type:"text",width:260,center:!1,backgroundColor:"#FFFFFF",components:[{id:0,text:"Accessible Elevator",textColor:"#000000",iconLeft:"ARROW_LEFT",iconLeftColor:"#000000",iconRight:"ACCESSIBLE_ELEVATOR",iconRightColor:"#000000",right:!1,large:!1,bold:!1,italic:!1}]}]}]},this.lightStyle="fluore",this.output={outputWidth:600,outputHeight:200},this.uniqueIdTable={layerIds:[0],componentIds:[0]},this.focusComponent={focusLayer:-1,focusComponent:-1},this.dataToJson(),this.$emit("contentChanged",this.signInfo,this.lightStyle,this.output)},addLayer(){let t=this.uniqueIdTable.layerIds[this.uniqueIdTable.layerIds.length-1]+1;this.uniqueIdTable.layerIds.push(t),this.signInfo.layers.push({name:"Layer"+(this.signInfo.layers.length+1),id:t,height:100,baseColor:"#FFFFFF",components:[{id:0,name:"init",type:"text",width:100,center:!1,backgroundColor:"#FFFFFF",components:[{id:0,type:"text",text:"Accessible Elevator",textColor:"#000000",iconLeft:"ARROW_LEFT",iconLeftColor:"#000000",iconRight:"ACCESSIBLE_ELEVATOR",iconRightColor:"#000000",right:!1,large:!1,bold:!1,italic:!1}]}]}),this.uniqueIdTable.layerIds.push(this.uniqueIdTable.layerIds.length),this.focusComponent.focusLayer=this.signInfo.layers.length-1,this.dataToJson(),this.$emit("contentChanged",this.signInfo,this.lightStyle,this.output)},selectLayer(t){this.focusComponent.focusLayer=t},deleteLayer(){this.focusComponent.focusLayer=-1,this.signInfo.layers.splice(this.focusComponent.focusLayer,1),this.dataToJson(),this.$emit("contentChanged",this.signInfo,this.lightStyle,this.output)},selectComponent(t){this.focusComponent.focusComponent=t},changeType(t,e,n){let i;console.log(t,e),"text"===t?i={id:e,name:n,type:"text",width:100,center:!1,backgroundColor:"#FFFFFF",components:[{id:0,text:"Accessible Elevator",textColor:"#000000",iconLeft:"ARROW_LEFT",iconLeftColor:"#000000",iconRight:"ACCESSIBLE_ELEVATOR",iconRightColor:"#000000",right:!1,large:!1,bold:!1,italic:!1}]}:"warn"===t?i={id:e,name:n,type:"warn",width:100,center:!1,backgroundColor:"#ffca2e",components:[{id:0,text:"Watch ahead!",textColor:"#000000",iconLeft:"NONE",iconLeftColor:"#000000",iconRight:"NONE",iconRightColor:"#000000",right:!1,large:!1,bold:!1,italic:!1}]}:"info"===t?i={id:e,name:n,type:"info",width:100,center:!1,backgroundColor:"#2b75ff",components:[{id:0,text:"",textColor:"#000000",iconLeft:"Information",iconLeftColor:"#000000",iconRight:"NONE",iconRightColor:"#000000",right:!1,large:!1,bold:!1,italic:!1},{id:1,text:"Information Desk",iconLeft:"NONE",iconLeftColor:"#000000",iconRight:"NONE",iconRightColor:"#000000",right:!1,large:!1,bold:!1,italic:!1}]}:"exit"===t?i={id:e,name:n,type:"exit",width:100,center:!1,backgroundColor:"#d00000",components:[{id:0,text:"",textColor:"#000000",iconLeft:"EXIT_WITH_FRAME",iconLeftColor:"#FFFFFF",iconRight:"NONE",iconRightColor:"#000000",right:!1,large:!1,bold:!1,italic:!1},{id:1,text:"Exit",textColor:"#FFFFFF",iconLeft:"NONE",iconLeftColor:"#000000",iconRight:"NONE",iconRightColor:"#000000",right:!1,large:!1,bold:!0,italic:!0}]}:"span"===t&&(i={id:e,name:n,type:"span",width:100,center:!0,backgroundColor:"#FFFFFF",components:[{id:0,showLogo:!1,showSpanLine:!0,color:"#FFFFFF",logoType:"NONE",bold:!1,italic:!1}]}),this.signInfo.layers[this.focusComponent.focusLayer].components[this.focusComponent.focusComponent]=i,this.dataToJson(),this.$emit("contentChanged",this.signInfo,this.lightStyle,this.output)},createComponentInLayer(){let t=0;while(this.signInfo.layers[this.focusComponent.focusLayer].components.find((e=>e.id===t)))t++;let e={id:t,name:"init",type:"text",width:260,center:!1,backgroundColor:"#FFFFFF",components:[{id:0,text:"Accessible Elevator",iconLeft:"ARROW_LEFT",iconLeftColor:"#000000",iconRight:"ACCESSIBLE_ELEVATOR",iconRightColor:"#000000",right:!1,large:!1,bold:!1,italic:!1}]};this.uniqueIdTable.componentIds.push(this.uniqueIdTable.componentIds.length),this.signInfo.layers[this.focusComponent.focusLayer].components.push(e),this.focusComponent.focusComponent=this.signInfo.layers[this.focusComponent.focusLayer].components.length-1,this.dataToJson(),this.$emit("contentChanged",this.signInfo,this.lightStyle,this.output)},deleteComponentInLayer(){this.signInfo.layers[this.focusComponent.focusLayer].components.splice(this.focusComponent.focusComponent,1),this.focusComponent.focusComponent=-1,this.dataToJson(),this.$emit("contentChanged",this.signInfo,this.lightStyle,this.output)},createContentInComponent(){let t,e=0;while(this.signInfo.layers[this.focusComponent.focusLayer].components[this.focusComponent.focusComponent].components.find((t=>t.id===e)))e++;let n=this.signInfo.layers[this.focusComponent.focusLayer].components[this.focusComponent.focusComponent].type;t="span"!==n?{id:e,text:"",textColor:"#000000",iconLeft:"NONE",iconLeftColor:"#000000",iconRight:"NONE",iconRightColor:"#000000",right:!1,large:!1,bold:!1,italic:!1}:{id:e,showLogo:!1,showSpanLine:!0,color:"#FFFFFF",logoType:"NONE",bold:!1,italic:!1},this.signInfo.layers[this.focusComponent.focusLayer].components[this.focusComponent.focusComponent].components.push(t),this.dataToJson(),this.$emit("contentChanged",this.signInfo,this.lightStyle,this.output)},deleteContentInComponent(){this.signInfo.layers[this.focusComponent.focusLayer].components[this.focusComponent.focusComponent].components.pop(),this.dataToJson(),this.$emit("contentChanged",this.signInfo,this.lightStyle,this.output)}}},Bt=$t,Ot=(0,c.Z)(Bt,Lt,Et,!1,null,"4420423d",null),Pt=Ot.exports,Dt={name:"App",components:{StationSignFTA:pt,StationSignFTAEditor:St,GuideSignFTA:Ft,GuideSignFTAEditor:Pt,HeaderFlex:m,FooterFlex:D,Signs:S,EntranceGuideSign:z,EntranceGuideEditor:it,SideTools:k,DownloadViewer:x,UploadViewer:ut,Editor:q},data(){return{titles:"FesGen",signStyle:"kitajuku-dentetsu",viewerType:""}},methods:{UpdateSignStyle(t){this.signStyle=t},UpdateData(t,e,n){this.$refs.signs.UpdateData(e,t,n)},RequireRearrange(t,e,n){this.$refs.signs.RequireRearrange(t,e,n)},entranceUpdateData(t,e,n){this.$refs.entrancesSign.UpdateData(e,t,n)},entranceRearrangement(t,e,n){this.$refs.entrancesSign.RequireRearrange(t,e,n)},stationFTAUpdateData(t,e,n){this.$refs.stationSignFTA.UpdateData(e,t,n)},stationFTARearrangement(t,e,n){this.$refs.stationSignFTA.RequireRearrange(t,e,n)},delBeltFTA(t,e,n,i){this.$refs.stationSignFTA.removeBelt(t,e,n,i)},guideSignFTAUpdateData(t,e,n){console.log("reached"),this.$refs.guideSignFTA.UpdateData(t,e,n)},updateViewer(t){sessionStorage.setItem("instanceSignStyle",this.signStyle),this.viewerType=t}},beforeDestroy(){sessionStorage.clear()}},Wt=Dt,Ut=(0,c.Z)(Wt,o,s,!1,null,"252981c4",null),Ht=Ut.exports;i.ZP.config.productionTip=!1,new i.ZP({render:t=>t(Ht)}).$mount("#app")}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,i,o,s){if(!i){var a=1/0;for(g=0;g<t.length;g++){i=t[g][0],o=t[g][1],s=t[g][2];for(var r=!0,l=0;l<i.length;l++)(!1&s||a>=s)&&Object.keys(n.O).every((function(t){return n.O[t](i[l])}))?i.splice(l--,1):(r=!1,s<a&&(a=s));if(r){t.splice(g--,1);var u=o();void 0!==u&&(e=u)}}return e}s=s||0;for(var g=t.length;g>0&&t[g-1][2]>s;g--)t[g]=t[g-1];t[g]=[i,o,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/FesGen/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,s,a=i[0],r=i[1],l=i[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(l)var g=l(n)}for(e&&e(i);u<a.length;u++)s=a[u],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(g)},i=self["webpackChunkFesGen"]=self["webpackChunkFesGen"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(5614)}));i=n.O(i)})();
//# sourceMappingURL=app.157a280e.js.map